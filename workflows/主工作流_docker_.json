{
  "active": false,
  "connections": {
    "åŸºç¡€å­—æ®µé…ç½®": {
      "main": [
        [
          {
            "node": "è§†é¢‘å­—æ®µé…ç½®",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "ç”Ÿæˆæ¯ä¸ªåˆ†é•œçš„å›¾ç‰‡prompt",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆæ¯ä¸ªåˆ†é•œçš„å›¾ç‰‡prompt": {
      "main": [
        [
          {
            "node": "Code in JavaScript8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "ç”Ÿæˆè¯­éŸ³è„šæœ¬",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆè¯­éŸ³è„šæœ¬": {
      "main": [
        [
          {
            "node": "è§’è‰²å’Œåˆ†é•œè„šæœ¬å­—æ®µæ•´ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript8": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆè¯­éŸ³è„šæœ¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript9": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆæ¯ä¸ªåˆ†é•œçš„å›¾ç‰‡prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è§’è‰²å’Œåˆ†é•œè„šæœ¬å­—æ®µæ•´ç†": {
      "main": [
        [
          {
            "node": "Call 'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆäººç‰©'",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆäººç‰©'": {
      "main": [
        [
          {
            "node": "è§’è‰²å›¾ç‰‡å­—æ®µæ•´ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è§’è‰²å›¾ç‰‡å­—æ®µæ•´ç†": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Call 'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆåˆ†é•œå›¾ç‰‡'",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆåˆ†é•œå›¾ç‰‡'": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆåˆ†é•œå›¾ç‰‡åæ•´ç†å­—æ®µ": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "è·å–å›¾ç‰‡å¯¹åº”åˆ†é•œè„šæœ¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è·å–å›¾ç‰‡å¯¹åº”åˆ†é•œè„šæœ¬": {
      "main": [
        [
          {
            "node": "Call 'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆè§†é¢‘'",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆåˆ†é•œè§†é¢‘åå­—æ®µæ•´ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "aiç”Ÿæˆå¸¦æ—¶é—´çš„è§†é¢‘è„šæœ¬å‰æ•°æ®æ•´ç†": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆå­—å¹•æ–‡ä»¶",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éŸ³è§†é¢‘åˆå¹¶å‰æ•°æ®æ•´ç†": {
      "main": [
        [
          {
            "node": "Code in JavaScript4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆå­—å¹•æ–‡ä»¶": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆå­—å¹•æ–‡ä»¶å",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆå­—å¹•æ–‡ä»¶å": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk2": {
      "main": [
        [
          {
            "node": "éŸ³è§†é¢‘åˆå¹¶å‰æ•°æ®æ•´ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser3": {
      "ai_outputParser": [
        [
          {
            "node": "ç”Ÿæˆå­—å¹•æ–‡ä»¶",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Video Merge": {
      "main": [
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript4": {
      "main": [
        [
          {
            "node": "Video Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript5": {
      "main": [
        [
          {
            "node": "Video Composer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆåˆ†é•œè§†é¢‘åå­—æ®µæ•´ç†": {
      "main": [
        [
          {
            "node": "Call 'è§†é¢‘å·¥ä½œæµ-ç”ŸæˆéŸ³é¢‘'",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬": {
      "main": [
        [
          {
            "node": "Code in JavaScript9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser4": {
      "ai_outputParser": [
        [
          {
            "node": "ç”Ÿæˆè§’è‰²å½¢è±¡æè¿°",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆè§’è‰²å½¢è±¡æè¿°": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å›¾ç‰‡æ¯”ä¾‹è®¡ç®—": {
      "main": [
        [
          {
            "node": "è§†é¢‘æ¯”ä¾‹è®¡ç®—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è§†é¢‘æ¯”ä¾‹è®¡ç®—": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆè§’è‰²å½¢è±¡æè¿°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'è§†é¢‘å·¥ä½œæµ-ç”ŸæˆéŸ³é¢‘'": {
      "main": [
        [
          {
            "node": "ç”ŸæˆéŸ³é¢‘åå­—æ®µæ•´ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”ŸæˆéŸ³é¢‘åå­—æ®µæ•´ç†": {
      "main": [
        [
          {
            "node": "aiç”Ÿæˆå¸¦æ—¶é—´çš„è§†é¢‘è„šæœ¬å‰æ•°æ®æ•´ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Video Composer": {
      "main": [
        [
          {
            "node": "Call 'è§†é¢‘ç”Ÿæˆ-ç”ŸæˆèƒŒæ™¯éŸ³ä¹'",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆè§†é¢‘'": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆ›å»ºå­æ–‡ä»¶å¤¹": {
      "main": [
        [
          {
            "node": "å›¾ç‰‡æ¯”ä¾‹è®¡ç®—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'è§†é¢‘ç”Ÿæˆ-ç”ŸæˆèƒŒæ™¯éŸ³ä¹'": {
      "main": [
        [
          {
            "node": "ç”ŸæˆèƒŒæ™¯éŸ³ä¹åå­—æ®µæ•´ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”ŸæˆèƒŒæ™¯éŸ³ä¹åå­—æ®µæ•´ç†": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è·å–éŸ³é¢‘æ—¶é•¿": {
      "main": [
        [
          {
            "node": "éŸ³è§†é¢‘åˆå¹¶å‰æ•°æ®æ•´ç†2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "è·å–éŸ³é¢‘æ—¶é•¿",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éŸ³è§†é¢‘åˆå¹¶å‰æ•°æ®æ•´ç†2": {
      "main": [
        [
          {
            "node": "Video Composer3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "åŸºç¡€å­—æ®µé…ç½®",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait2": {
      "main": [
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆåˆ†é•œå›¾ç‰‡åæ•´ç†å­—æ®µ",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ç”Ÿæˆè§’è‰²å½¢è±¡æè¿°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "Wait2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "ç”Ÿæˆè§’è‰²å½¢è±¡æè¿°",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "ç”Ÿæˆè¯­éŸ³è„šæœ¬",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "ç”Ÿæˆæ¯ä¸ªåˆ†é•œçš„å›¾ç‰‡prompt",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "ç”Ÿæˆå­—å¹•æ–‡ä»¶",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "è§†é¢‘å­—æ®µé…ç½®": {
      "main": [
        [
          {
            "node": "åˆ›å»ºå­æ–‡ä»¶å¤¹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-11-18T02:41:55.604Z",
  "id": "yPBKYNvAmkIH3Cg1",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "ä¸»å·¥ä½œæµ_docker_",
  "nodes": [
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "65c09813-51e5-4759-b328-ea01e6b12004",
              "name": "output_folder_path",
              "value": "=/data/{{ $now.format('yyyy-MM-dd_hh-mm-ss') }}/",
              "type": "string"
            },
            {
              "id": "2264f918-4624-4b00-8572-edd7b0477d7e",
              "name": "runninghub_apikey",
              "value": "",
              "type": "string"
            },
            {
              "id": "6ebde15c-5b8e-474a-96b8-b114def64f53",
              "name": "å·¥ä½œæµid-ç”Ÿæˆäººç‰©",
              "value": "",
              "type": "string"
            },
            {
              "id": "746dbab9-ce3a-4f68-adc2-e8604561ae9c",
              "name": "å·¥ä½œæµid-ç”Ÿæˆåˆ†é•œå›¾ç‰‡",
              "value": "",
              "type": "string"
            },
            {
              "id": "50f96d7d-3d05-462b-a569-d4d8d3604b0a",
              "name": "å·¥ä½œæµid-ç”Ÿæˆè§†é¢‘",
              "value": "",
              "type": "string"
            },
            {
              "id": "67625300-a88f-4c60-9219-011531abf6d8",
              "name": "å·¥ä½œæµid-ç”ŸæˆéŸ³é¢‘",
              "value": "",
              "type": "string"
            },
            {
              "id": "2f279430-ae26-460a-b7b1-8f97c745cb6c",
              "name": "å·¥ä½œæµid-ç”ŸæˆèƒŒæ™¯éŸ³ä¹",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -528,
        320
      ],
      "id": "7d011cf0-3cd0-407f-94d2-7ff769519096",
      "name": "åŸºç¡€å­—æ®µé…ç½®"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"storyboard_prompts\": [\n    {\n      \"prompt\": \"è§’è‰²[æœé¥°å˜åŒ–ï¼ˆå¦‚éœ€è¦ï¼‰]ï¼Œ[è¡¨æƒ…/æƒ…ç»ªæè¿°]ã€‚[åœºæ™¯æè¿°]ã€‚[åŠ¨ä½œæè¿°]ã€‚[ç¾å­¦æ§åˆ¶ï¼šå…‰æºã€ç…§æ˜ã€æ™¯åˆ«ã€æ„å›¾ã€é•œå¤´ç„¦è·ã€æœºä½è§’åº¦ã€é•œå¤´è¿åŠ¨ã€è‰²è°ƒç­‰]ã€‚[é£æ ¼åŒ–]\",\n      \"duration\": 3,\n      \"description\": \"å»ºç«‹åœºæ™¯,å±•ç°ä¸»è§’åˆå§‹çŠ¶æ€\"\n    },\n    {\n      \"prompt\": \"[å®Œæ•´çš„äº”æ¨¡å—æè¿°...]\",\n      \"duration\": 4,\n      \"description\": \"æƒ…èŠ‚è½¬æŠ˜,ä¸»è§’æƒ…ç»ªå˜åŒ–\"\n    }\n  ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1296,
        528
      ],
      "id": "546d0317-b471-4d1c-8619-b5387fe544f1",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "4f02a59d-ed62-45b4-ab18-8072f7420b23",
              "name": "character_prompt",
              "value": "={{ $('ç”Ÿæˆè§’è‰²å½¢è±¡æè¿°').first().json.output.character_prompt }}",
              "type": "string"
            },
            {
              "id": "2fb2c42c-00c2-4ebf-b64a-e7aaf531c89c",
              "name": "storyboard_prompts",
              "value": "={{ $('ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬').first().json.output.storyboard_prompts.map(item => item.prompt) }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1248,
        656
      ],
      "id": "7c19f571-2c67-4cee-b2b1-bf36f65ab007",
      "name": "è§’è‰²å’Œåˆ†é•œè„šæœ¬å­—æ®µæ•´ç†"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"storyboard_image_prompts\": [\n    {\n      \"prompt\": \"è½¬æ¢åçš„é¦–å¸§å›¾ç‰‡æè¿°\",\n      \"thought_process\": \"è¯¦ç»†è¯´æ˜ä½ çš„åˆ†ææ€è·¯ï¼šè¯†åˆ«äº†å“ªäº›åŠ¨ä½œç±»å‹ã€åšäº†å“ªäº›è½¬æ¢ã€ä¿ç•™äº†å“ªäº›å…ƒç´ ã€åˆ é™¤äº†å“ªäº›å…ƒç´ \"\n    }\n  ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        336,
        880
      ],
      "id": "f5f1fa3a-3bd6-403f-82b9-e037046f9915",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è§†é¢‘åˆ†é•œåˆ†æä¸“å®¶ï¼Œä½ çš„ä»»åŠ¡æ˜¯å°†\"è§†é¢‘åˆ†é•œæè¿°\"è½¬æ¢ä¸º\"é¦–å¸§å›¾ç‰‡æè¿°\"ã€‚è¿™äº›å›¾ç‰‡å°†ç”¨ä½œå›¾ç”Ÿè§†é¢‘çš„èµ·å§‹å¸§ï¼Œå› æ­¤å¿…é¡»å‡†ç¡®åæ˜ è§†é¢‘å³å°†å¼€å§‹æ—¶çš„åœºæ™¯çŠ¶æ€ã€‚\n\n## æ ¸å¿ƒè½¬æ¢åŸåˆ™\n\n### 1. åŠ¨ä½œçŠ¶æ€åˆ†æä¸è½¬æ¢\n\nä½ éœ€è¦é€šè¿‡**è¯­ä¹‰åˆ†æ**æ¨æ–­è§†é¢‘çš„èµ·å§‹çŠ¶æ€ï¼š\n\n**ä½ç§»ç±»åŠ¨è¯**ï¼ˆè¡¨ç¤ºä»Aåˆ°Bçš„ç§»åŠ¨ï¼‰ï¼š\n- \"èµ°åˆ°\"ã€\"è·‘å‘\"ã€\"ç§»åŠ¨åˆ°\"ã€\"è½¬èº«èµ°å‘\" â†’ è¯´æ˜èµ·å§‹æ—¶**ä¸åœ¨**ç›®æ ‡ä½ç½®\n- è½¬æ¢è§„åˆ™ï¼šæ”¹ä¸º\"å‡†å¤‡+åŠ¨ä½œ\"ï¼Œåˆ é™¤ç›®æ ‡ä½ç½®çš„\"åˆ°è¾¾çŠ¶æ€\"\n- ç¤ºä¾‹ï¼š\n  - \"èµ°åˆ°çª—è¾¹\" â†’ \"å‡†å¤‡èµ°å‘çª—è¾¹\"\n  - \"è·‘å‘é—¨å£\" â†’ \"å‡†å¤‡è·‘å‘é—¨å£\"\n  - \"è½¬èº«ç¦»å¼€\" â†’ \"å‡†å¤‡è½¬èº«\"\n\n**çŠ¶æ€ç±»åŠ¨è¯**ï¼ˆè¡¨ç¤ºå·²ç»å¤„äºæŸä¸ªä½ç½®/çŠ¶æ€ï¼‰ï¼š\n- \"ç«™åœ¨\"ã€\"ååœ¨\"ã€\"èººåœ¨\"ã€\"é åœ¨\" â†’ è¯´æ˜èµ·å§‹æ—¶**å·²ç»åœ¨**è¯¥çŠ¶æ€\n- è½¬æ¢è§„åˆ™ï¼šä¿ç•™çŠ¶æ€æè¿°ï¼Œåˆ é™¤åç»­åŠ¨ä½œ\n- ç¤ºä¾‹ï¼š\n  - \"ç«™åœ¨çª—è¾¹ï¼Œæ¨å¼€çª—æˆ·\" â†’ \"ç«™åœ¨çª—è¾¹\"\n  - \"ååœ¨æ¡Œå‰ï¼Œæ‹¿èµ·ç¬”\" â†’ \"ååœ¨æ¡Œå‰\"\n\n**å¤šä¸ªè¿ç»­åŠ¨ä½œçš„å¤„ç†**ï¼š\n- åªä¿ç•™**ç¬¬ä¸€ä¸ªåŠ¨ä½œçš„èµ·å§‹çŠ¶æ€**ï¼Œåˆ é™¤æ‰€æœ‰åç»­åŠ¨ä½œ\n- ç¤ºä¾‹ï¼š\n  - \"èµ°åˆ°è¡£æ¶è¾¹ï¼Œè„±ä¸‹å¤–è¡£ï¼ŒæŒ‚åœ¨è¡£æ¶ä¸Š\" â†’ \"å‡†å¤‡èµ°å‘è¡£æ¶\"\n  - \"ç«™åœ¨è¡£æ¶è¾¹ï¼Œè„±ä¸‹å¤–è¡£ï¼ŒæŒ‚åœ¨è¡£æ¶ä¸Š\" â†’ \"ç«™åœ¨è¡£æ¶è¾¹\"\n\n### 2. ä¿®é¥°è¯å¤„ç†è§„åˆ™\n\n**å¿…é¡»åˆ é™¤çš„ä¿®é¥°è¯**ï¼ˆæè¿°è¿åŠ¨è¿‡ç¨‹çš„è¯æ±‡ï¼‰ï¼š\n- é€Ÿåº¦ä¿®é¥°ï¼šæ…¢æ…¢ã€å¿«é€Ÿã€è¿…é€Ÿã€ç¼“ç¼“ã€è½»å¿«åœ°\n- è¿‡ç¨‹ä¿®é¥°ï¼šé€æ¸ã€ä¸€è¾¹...ä¸€è¾¹...ã€æŒç»­ã€åå¤\n- èŠ‚å¥ä¿®é¥°ï¼šæœ‰èŠ‚å¥åœ°ã€æµç•…åœ°\n\n**å¿…é¡»ä¿ç•™çš„ä¿®é¥°è¯**ï¼ˆæè¿°é™æ€çŠ¶æ€çš„è¯æ±‡ï¼‰ï¼š\n- è¡¨æƒ…çŠ¶æ€ï¼šå¾®ç¬‘ã€ä¸“æ³¨ã€æ¸©æŸ”ã€ä¸¥è‚ƒ\n- å§¿æ€æè¿°ï¼šæŠ¬å¤´ã€ä½å¤´ã€ä¾§èº«ã€æŒºç›´\n- æƒ…ç»ªæ°›å›´ï¼šæ„‰æ‚¦ã€æ”¾æ¾ã€ç´§å¼ \n\n**ç¤ºä¾‹**ï¼š\n- \"æ…¢æ…¢è½¬èº«\" â†’ \"å‡†å¤‡è½¬èº«\"\n- \"ä¸€è¾¹èµ°ä¸€è¾¹æŠ¬å¤´æ¬£èµå¤œæ™¯\" â†’ \"å‡†å¤‡è¡Œèµ°ï¼Œä¿æŒæŠ¬å¤´æ¬£èµå¤œæ™¯çš„å§¿æ€\"\n- \"ç†Ÿç»ƒè€Œæœ‰èŠ‚å¥åœ°åˆ‡èœ\" â†’ \"å‡†å¤‡åˆ‡èœ\"\n\n### 3. è¿é•œä¸é•œå¤´å‚æ•°å¤„ç†\n\n**åˆ é™¤çº¯è¿é•œæè¿°**ï¼ˆæè¿°æ‘„åƒæœºè¿åŠ¨çš„è¯æ±‡ï¼‰ï¼š\n- \"æ‰‹æŒè·Ÿéšé•œå¤´\"\n- \"ç¼“æ…¢ç¯ç»•æ‹æ‘„\"\n- \"é•œå¤´è·Ÿéš\"\n- \"æ‘‡é•œå¤´\"\n- \"æ¨æ‹‰é•œå¤´çš„è¿åŠ¨è¿‡ç¨‹\"\n\n**è½¬æ¢æ¶‰åŠæ„å›¾çš„è¿é•œ**ï¼ˆå°†è¿åŠ¨è½¬æ¢ä¸ºé™æ€æ„å›¾ï¼‰ï¼š\n- \"é•œå¤´ä»è¿œå¤„æ¨è¿›\" â†’ \"è¿œæ™¯\"\n- \"é•œå¤´ä»ä¸Šæ–¹ä¿¯å†²\" â†’ \"ä¿¯æ‹è§’åº¦\"\n- \"é•œå¤´é€æ¸æ‹‰è¿‘\" â†’ åˆ é™¤ï¼ˆæˆ–æ ¹æ®è¯­å¢ƒé€‰æ‹©\"è¿‘æ™¯/ä¸­æ™¯/è¿œæ™¯\"ï¼‰\n\n**å®Œå…¨ä¿ç•™å›ºå®šé•œå¤´å‚æ•°**ï¼š\n- ç„¦è·ï¼š50mmæ ‡å‡†é•œå¤´ã€85mmé•œå¤´\n- è§’åº¦ï¼šå¹³è§†è§’åº¦ã€ä¿¯æ‹è§’åº¦ã€ä»°æ‹è§’åº¦\n- æ™¯åˆ«ï¼šä¸­æ™¯ã€è¿‘æ™¯ã€ç‰¹å†™ã€å…¨æ™¯\n- å…¶ä»–ï¼šæ™¯æ·±æ•ˆæœã€æ„å›¾æ–¹å¼\n\n### 4. å®Œå…¨ä¿ç•™çš„å…ƒç´ \n\nä»¥ä¸‹å…ƒç´ å¿…é¡»**åŸæ ·ä¿ç•™**ï¼Œä»¥ç¡®ä¿å›¾ç‰‡ä¸è§†é¢‘çš„ä¸€è‡´æ€§ï¼š\n\n- **åœºæ™¯æè¿°**ï¼šç¯å¢ƒã€å»ºç­‘ã€ç‰©å“ã€å¤©æ°”ã€æ—¶é—´\n- **å…‰å½±æè¿°**ï¼šå…‰æºã€å…‰çº¿è´¨æ„Ÿã€é˜´å½±ã€è‰²æ¸©\n- **æ°›å›´è¥é€ **ï¼šæƒ…ç»ªã€è´¨æ„Ÿã€ç»†èŠ‚åˆ»ç”»\n- **ç¾å­¦æ§åˆ¶**ï¼šè‰²è°ƒã€é¥±å’Œåº¦ã€å¯¹æ¯”åº¦ã€æ›å…‰\n- **é£æ ¼åŒ–**ï¼šè‰ºæœ¯é£æ ¼ã€ç»˜ç”»æŠ€æ³•ã€æ¸²æŸ“æ–¹å¼\n- **äººç‰©é™æ€ç‰¹å¾**ï¼šæœè£…ã€è¡¨æƒ…ã€å§¿æ€ï¼ˆéåŠ¨ä½œè¿‡ç¨‹ï¼‰\n\n### 5. ç‰¹æ®Šæƒ…å†µå¤„ç†\n\n**é™æ€åœºæ™¯**ï¼š\n- å¦‚æœè§†é¢‘åˆ†é•œæœ¬èº«æ²¡æœ‰æ˜æ˜¾åŠ¨ä½œï¼ˆå¦‚\"è§’è‰²ç«™ç«‹å‡è§†è¿œæ–¹\"ï¼‰\n- å›¾ç‰‡æè¿°åŸºæœ¬ä¿æŒä¸å˜ï¼Œåªéœ€åˆ é™¤å¯èƒ½å­˜åœ¨çš„è¿é•œæè¿°\n\n**ä¼´éšçŠ¶æ€ + ä¸»è¦åŠ¨ä½œ**ï¼š\n- ä¸»è¦åŠ¨ä½œï¼šæŒ‰ç…§è§„åˆ™è½¬æ¢ä¸ºå‡†å¤‡çŠ¶æ€\n- ä¼´éšçŠ¶æ€ï¼šä¿ç•™å§¿æ€æè¿°\n- ç¤ºä¾‹ï¼š\"èµ°åœ¨è¡—é“ä¸Šï¼ŒåŒæ‰‹æ’åœ¨å£è¢‹é‡Œï¼ŒæŠ¬å¤´æ¬£èµå¤œæ™¯\"\n  â†’ \"å‡†å¤‡è¡Œèµ°ï¼ŒåŒæ‰‹æ’åœ¨å£è¢‹é‡Œï¼Œä¿æŒæŠ¬å¤´æ¬£èµå¤œæ™¯çš„å§¿æ€\"\n\n## è½¬æ¢ç¤ºä¾‹\n\n### ç¤ºä¾‹ 1ï¼šä½ç§»åŠ¨ä½œ\n\n**è¾“å…¥è§†é¢‘åˆ†é•œ**ï¼š\n\"è§’è‰²é¢å¸¦è½»æ¾æ„‰æ‚¦çš„å¾®ç¬‘ï¼Œçœ¼ç¥æ¸©æŸ”ï¼Œé€éœ²å‡ºä¸‹ç­åçš„æ”¾æ¾æ„Ÿã€‚å¤œæ™šç¹åçš„åŸå¸‚è¡—é“ï¼Œè¡—é“ä¸¤æ—æ˜¯æ—ç«‹çš„é«˜æ¥¼ï¼Œå·¨å¤§çš„å¹¿å‘Šç‰Œå’Œéœ“è™¹ç¯æŠ•ä¸‹ç»šçƒ‚çš„å…‰å½±ï¼Œåœ°é¢å› åˆšä¸‹è¿‡å°é›¨è€Œæ¹¿æ¶¦ï¼Œå€’æ˜ ç€äº”å½©æ–‘æ–“çš„ç¯å…‰ã€‚è¡Œäººä¸è½¦è¾†ç©¿æ¢­ä¸æ¯ã€‚å¥¹åŒæ‰‹æ’åœ¨å¼€è¡«å£è¢‹é‡Œï¼Œèº«ä½“éšç€è½»å¿«çš„æ­¥ä¼å¾®å¾®æ‘‡æ™ƒï¼Œä¸€è¾¹èµ°ä¸€è¾¹æŠ¬å¤´æ¬£èµç€åŸå¸‚çš„å¤œæ™¯ã€‚æ··åˆç€éœ“è™¹ç¯å’Œè¡—ç¯çš„äººå·¥å…‰æºï¼Œå½¢æˆä¸°å¯Œçš„å…‰æ–‘å’Œé•œå¤´å…‰æ™•ï¼Œä¸­æ™¯ï¼Œå¹³è§†è§’åº¦ï¼Œ50mmæ ‡å‡†é•œå¤´ï¼Œæ‰‹æŒè·Ÿéšé•œå¤´ï¼Œæš–è‰²è°ƒï¼Œé«˜é¥±å’Œåº¦ã€‚æ–°æµ·è¯šç»†è…»ç¬”è§¦é£æ ¼ï¼Œå¼ºè°ƒå…‰å½±çš„é€æ˜æ„Ÿå’Œéƒ½å¸‚çš„ç’€ç’¨ç»†èŠ‚ã€‚\"\n\n**è¾“å‡º**ï¼š\n```json\n{\n  \"storyboard_image_prompts\": [\n    {\n      \"prompt\": \"è§’è‰²é¢å¸¦è½»æ¾æ„‰æ‚¦çš„å¾®ç¬‘ï¼Œçœ¼ç¥æ¸©æŸ”ï¼Œé€éœ²å‡ºä¸‹ç­åçš„æ”¾æ¾æ„Ÿã€‚å¤œæ™šç¹åçš„åŸå¸‚è¡—é“ï¼Œè¡—é“ä¸¤æ—æ˜¯æ—ç«‹çš„é«˜æ¥¼ï¼Œå·¨å¤§çš„å¹¿å‘Šç‰Œå’Œéœ“è™¹ç¯æŠ•ä¸‹ç»šçƒ‚çš„å…‰å½±ï¼Œåœ°é¢å› åˆšä¸‹è¿‡å°é›¨è€Œæ¹¿æ¶¦ï¼Œå€’æ˜ ç€äº”å½©æ–‘æ–“çš„ç¯å…‰ã€‚è¡Œäººä¸è½¦è¾†ç©¿æ¢­ä¸æ¯ã€‚å¥¹åŒæ‰‹æ’åœ¨å¼€è¡«å£è¢‹é‡Œï¼Œä¿æŒæŠ¬å¤´æ¬£èµå¤œæ™¯çš„å§¿æ€ã€‚æ··åˆç€éœ“è™¹ç¯å’Œè¡—ç¯çš„äººå·¥å…‰æºï¼Œå½¢æˆä¸°å¯Œçš„å…‰æ–‘å’Œé•œå¤´å…‰æ™•ï¼Œä¸­æ™¯ï¼Œå¹³è§†è§’åº¦ï¼Œ50mmæ ‡å‡†é•œå¤´ï¼Œæš–è‰²è°ƒï¼Œé«˜é¥±å’Œåº¦ã€‚æ–°æµ·è¯šç»†è…»ç¬”è§¦é£æ ¼ï¼Œå¼ºè°ƒå…‰å½±çš„é€æ˜æ„Ÿå’Œéƒ½å¸‚çš„ç’€ç’¨ç»†èŠ‚ã€‚\",\n      \"thought_process\": \"1. è¯†åˆ«åŠ¨ä½œï¼š'ä¸€è¾¹èµ°ä¸€è¾¹æŠ¬å¤´æ¬£èµå¤œæ™¯'åŒ…å«ä¸»è¦åŠ¨ä½œ'èµ°'å’Œä¼´éšå§¿æ€'æŠ¬å¤´æ¬£èµ'ã€‚2. è½¬æ¢é€»è¾‘ï¼šåˆ é™¤'èº«ä½“éšç€è½»å¿«çš„æ­¥ä¼å¾®å¾®æ‘‡æ™ƒ'å’Œ'ä¸€è¾¹èµ°ä¸€è¾¹'è¿™äº›è¿åŠ¨è¿‡ç¨‹æè¿°ï¼Œä¿ç•™'æŠ¬å¤´æ¬£èµå¤œæ™¯'çš„é™æ€å§¿æ€ã€‚3. åˆ é™¤è¿é•œï¼šå»é™¤'æ‰‹æŒè·Ÿéšé•œå¤´'ã€‚4. ä¿ç•™å…ƒç´ ï¼šå®Œæ•´ä¿ç•™äººç‰©è¡¨æƒ…ã€åœºæ™¯æè¿°ã€å…‰å½±æ•ˆæœã€é•œå¤´å‚æ•°ï¼ˆä¸­æ™¯ã€å¹³è§†ã€50mmï¼‰ã€è‰²è°ƒå’Œé£æ ¼ã€‚\"\n    }\n  ]\n}\n```\n\n### ç¤ºä¾‹ 2ï¼šçŠ¶æ€ + åŠ¨ä½œ\n\n**è¾“å…¥è§†é¢‘åˆ†é•œ**ï¼š\n\"è§’è‰²è¡¨æƒ…ä¸“æ³¨è€Œæ»¡è¶³ï¼Œå˜´è§’å¾®å¾®ä¸Šæ‰¬ï¼Œçœ¼ç¥ä¸­å……æ»¡äº†å¯¹ç”Ÿæ´»çš„çƒ­çˆ±ã€‚æ¸©æš–æ˜äº®çš„å®¶åº­å¨æˆ¿ï¼Œæµ…æœ¨è‰²çš„æ©±æŸœå’Œæ–™ç†å°å¹²å‡€æ•´æ´ã€‚å¢™å£ä¸ŠæŒ‚ç€å¯çˆ±çš„å¨å…·ï¼Œä¸€ç›æš–é»„è‰²çš„åŠç¯ä»ä¸Šæ–¹ç…§äº®æ–™ç†åŒºåŸŸã€‚çª—å¤–æ˜¯æ·±è“è‰²çš„å¤œç©ºï¼Œçª—æˆ·ç»ç’ƒä¸Šå‡ç»“ç€è–„è–„çš„æ°´æ±½ã€‚å¥¹å·¦æ‰‹ç¨³ç¨³åœ°æŒ‰ä½é£Ÿæï¼Œå³æ‰‹æ¡ç€å¨åˆ€ï¼Œç†Ÿç»ƒè€Œæœ‰èŠ‚å¥åœ°åˆ‡ç€èœï¼Œæ‰‹æŒ‡åŠ¨ä½œè½»å·§çµæ´»ã€‚é¡¶å…‰ç…§æ˜æ¥è‡ªåŠç¯ï¼Œå…‰çº¿æŸ”å’Œï¼Œä¸­è¿‘æ™¯ï¼Œç•¥å¾®ä¿¯æ‹çš„è§’åº¦ï¼Œ85mmé•œå¤´è¥é€ æµ…æ™¯æ·±æ•ˆæœï¼Œé™æ­¢é•œå¤´ï¼Œæ•´ä½“ä¸ºæ¸©é¦¨çš„æš–é»„è‰²è°ƒã€‚æ–°æµ·è¯šç»†è…»ç¬”è§¦é£æ ¼ï¼Œå¯¹é£Ÿç‰©çš„è´¨æ„Ÿå’Œæ¸©æš–çš„å±…å®¶æ°›å›´è¿›è¡Œç²¾è‡´åˆ»ç”»ã€‚\"\n\n**è¾“å‡º**ï¼š\n```json\n{\n  \"storyboard_image_prompts\": [\n    {\n      \"prompt\": \"è§’è‰²è¡¨æƒ…ä¸“æ³¨è€Œæ»¡è¶³ï¼Œå˜´è§’å¾®å¾®ä¸Šæ‰¬ï¼Œçœ¼ç¥ä¸­å……æ»¡äº†å¯¹ç”Ÿæ´»çš„çƒ­çˆ±ã€‚æ¸©æš–æ˜äº®çš„å®¶åº­å¨æˆ¿ï¼Œæµ…æœ¨è‰²çš„æ©±æŸœå’Œæ–™ç†å°å¹²å‡€æ•´æ´ã€‚å¢™å£ä¸ŠæŒ‚ç€å¯çˆ±çš„å¨å…·ï¼Œä¸€ç›æš–é»„è‰²çš„åŠç¯ä»ä¸Šæ–¹ç…§äº®æ–™ç†åŒºåŸŸã€‚çª—å¤–æ˜¯æ·±è“è‰²çš„å¤œç©ºï¼Œçª—æˆ·ç»ç’ƒä¸Šå‡ç»“ç€è–„è–„çš„æ°´æ±½ã€‚å¥¹å·¦æ‰‹ç¨³ç¨³åœ°æŒ‰ä½é£Ÿæï¼Œå³æ‰‹æ¡ç€å¨åˆ€ï¼Œå‡†å¤‡åˆ‡èœã€‚é¡¶å…‰ç…§æ˜æ¥è‡ªåŠç¯ï¼Œå…‰çº¿æŸ”å’Œï¼Œä¸­è¿‘æ™¯ï¼Œç•¥å¾®ä¿¯æ‹çš„è§’åº¦ï¼Œ85mmé•œå¤´è¥é€ æµ…æ™¯æ·±æ•ˆæœï¼Œæ•´ä½“ä¸ºæ¸©é¦¨çš„æš–é»„è‰²è°ƒã€‚æ–°æµ·è¯šç»†è…»ç¬”è§¦é£æ ¼ï¼Œå¯¹é£Ÿç‰©çš„è´¨æ„Ÿå’Œæ¸©æš–çš„å±…å®¶æ°›å›´è¿›è¡Œç²¾è‡´åˆ»ç”»ã€‚\",\n      \"thought_process\": \"1. è¯†åˆ«çŠ¶æ€ï¼šè§’è‰²å·²ç»å¤„äºå¨æˆ¿æ–™ç†å°å‰çš„çŠ¶æ€ï¼ˆå·¦æ‰‹æŒ‰ä½é£Ÿæï¼Œå³æ‰‹æ¡åˆ€ï¼‰ã€‚2. è¯†åˆ«åŠ¨ä½œï¼š'ç†Ÿç»ƒè€Œæœ‰èŠ‚å¥åœ°åˆ‡ç€èœ'æ˜¯æ­£åœ¨è¿›è¡Œçš„åŠ¨ä½œã€‚3. è½¬æ¢é€»è¾‘ï¼šå°†'åˆ‡ç€èœ'è½¬æ¢ä¸º'å‡†å¤‡åˆ‡èœ'ï¼Œåˆ é™¤è¿‡ç¨‹æ€§ä¿®é¥°è¯'ç†Ÿç»ƒè€Œæœ‰èŠ‚å¥åœ°'å’Œ'æ‰‹æŒ‡åŠ¨ä½œè½»å·§çµæ´»'ã€‚4. ä¿ç•™å…ƒç´ ï¼šå®Œæ•´ä¿ç•™äººç‰©è¡¨æƒ…ã€æ‰‹éƒ¨å§¿æ€ï¼ˆæŒ‰ä½é£Ÿæã€æ¡åˆ€ï¼‰ã€åœºæ™¯æè¿°ã€å…‰å½±ã€é•œå¤´å‚æ•°ã€è‰²è°ƒå’Œé£æ ¼ã€‚5. è¿é•œå¤„ç†ï¼šåŸæè¿°ä¸­'é™æ­¢é•œå¤´'å·²æ˜¯é™æ€ï¼Œä¿ç•™å…¶ä»–é•œå¤´å‚æ•°å³å¯ã€‚\"\n    }\n  ]\n}\n```\n\n## å¼€å§‹ä»»åŠ¡\n\nç°åœ¨è¯·æŒ‰ç…§ä»¥ä¸Šè§„åˆ™ï¼Œå°†æˆ‘æä¾›çš„è§†é¢‘åˆ†é•œæè¿°è½¬æ¢ä¸ºé¦–å¸§å›¾ç‰‡æè¿°ã€‚è®°ä½ï¼š\n1. ä»”ç»†åˆ†ææ¯ä¸ªåŠ¨è¯çš„è¯­ä¹‰ï¼Œåˆ¤æ–­èµ·å§‹çŠ¶æ€\n2. ä¿ç•™æ‰€æœ‰åœºæ™¯ã€å…‰å½±ã€ç¾å­¦ã€é£æ ¼å…ƒç´ \n3. åˆ é™¤æ‰€æœ‰è¿åŠ¨è¿‡ç¨‹æè¿°\n4. åœ¨ thought_process ä¸­è¯¦ç»†è¯´æ˜ä½ çš„åˆ†æè¿‡ç¨‹\n5. è¾“å‡ºæ ‡å‡† JSON æ ¼å¼\n\nè¯·è¾“å‡ºæ ‡å‡†çš„ JSON æ ¼å¼ï¼š\n\n```json\n{\n  \"storyboard_image_prompts\": [\n    {\n      \"prompt\": \"è½¬æ¢åçš„é¦–å¸§å›¾ç‰‡æè¿°\",\n      \"thought_process\": \"è¯¦ç»†è¯´æ˜ä½ çš„åˆ†ææ€è·¯ï¼šè¯†åˆ«äº†å“ªäº›åŠ¨ä½œç±»å‹ã€åšäº†å“ªäº›è½¬æ¢ã€ä¿ç•™äº†å“ªäº›å…ƒç´ ã€åˆ é™¤äº†å“ªäº›å…ƒç´ \"\n    }\n  ]\n}\n```\n\nä»¥ä¸‹æ˜¯æˆ‘çš„è§†é¢‘åˆ†é•œæè¿°ï¼š\n{{ $json.data }}\n",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        176,
        672
      ],
      "id": "0a50cb42-3182-430a-98bc-0939f8d92fa2",
      "name": "ç”Ÿæˆæ¯ä¸ªåˆ†é•œçš„å›¾ç‰‡prompt",
      "retryOnFail": true,
      "maxTries": 5
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"characters_timbre\": [\n      {\n        \"timbre_name\": \"æ—ç™½\",\n        \"timbre_des\": \"\",\n        \"timbre_id\": 0\n      }\n    ],\n\t\"voice_scripts\": [\n      {\n        \"text\": \"ç¬¬ä¸€æ®µæ—ç™½æˆ–è§’è‰²è¯´çš„è¯\",\n        \"timbre_id\": 0,\n        \"start_time\": 100,\n        \"end_time\": 4000\n      },\n      {\n        \"text\": \"ç¬¬äºŒæ®µæ—ç™½æˆ–è§’è‰²è¯´çš„è¯\",\n        \"timbre_id\": 1,\n        \"start_time\": 5500,\n        \"end_time\": 9500\n      }\n  ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        688,
        880
      ],
      "id": "172058a6-d729-476a-8eab-f96e296b8436",
      "name": "Structured Output Parser2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„ç”µå½±å¯¼æ¼”å’Œåˆ†é•œå¸ˆ,ç²¾é€šè§†è§‰å™äº‹ã€é•œå¤´è¯­è¨€å’Œæƒ…æ„Ÿè¡¨è¾¾ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®æˆ‘ç»™å‡ºçš„'æ•…äº‹åˆ†é•œè„šæœ¬'å’Œ'è§’è‰²è®¾å®š',ä¸ºè§†é¢‘ç”Ÿæˆé…éŸ³æ–¹æ¡ˆã€‚\n\nä»¥ä¸‹æ˜¯æ•…äº‹ä¸»è§’çš„æè¿°ï¼š\n{{ $('ç”Ÿæˆè§’è‰²å½¢è±¡æè¿°').item.json.output.character_prompt }}\n\nä»¥ä¸‹æ˜¯è§†é¢‘åˆ†é•œè„šæœ¬ï¼š\n{{ JSON.stringify($json.data) }}\n\nã€ä»»åŠ¡æŒ‡ä»¤ã€‘\nè¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å’Œè¦æ±‚,å°†æ‰€æœ‰è¾“å‡ºæ•´åˆåˆ°ä¸€ä¸ªJSONå¯¹è±¡ä¸­ã€‚\n\n1. **éŸ³è‰²æ–¹æ¡ˆè®¾è®¡ (characters_timbre)**:\n   * **çµæ´»é€‰æ‹©åŸåˆ™**: æ ¹æ®æ•…äº‹é£æ ¼å’Œå™äº‹éœ€æ±‚ï¼Œè‡ªä¸»å†³å®šä½¿ç”¨ä½•ç§éŸ³è‰²ç»„åˆï¼š\n     - çº¯æ—ç™½å™äº‹ï¼šé€‚åˆæ–‡å­¦æ€§å¼ºã€å²è¯—æ„Ÿçš„æ•…äº‹ï¼ˆåªè®¾è®¡æ—ç™½éŸ³è‰²ï¼‰\n     - çº¯è§’è‰²å¯¹è¯ï¼šé€‚åˆç¬¬ä¸€äººç§°ã€æ²‰æµ¸å¼ä½“éªŒçš„æ•…äº‹ï¼ˆåªè®¾è®¡è§’è‰²éŸ³è‰²ï¼‰\n     - æ—ç™½+è§’è‰²ï¼šé€‚åˆéœ€è¦å®¢è§‚å™è¿°å’Œä¸»è§‚è¡¨è¾¾ç»“åˆçš„æ•…äº‹ï¼ˆè®¾è®¡ä¸¤ç§éŸ³è‰²ï¼‰\n   \n   * **éŸ³è‰²è®¾è®¡è¦æ±‚**:\n     - ä¸ºä½ é€‰æ‹©çš„éŸ³è‰²ç±»å‹è®¾è®¡ç¬¦åˆå¹´é¾„ã€æ€§åˆ«ã€æ€§æ ¼çš„éŸ³è‰²æè¿°\n     - æ¯ä¸ªéŸ³è‰²è®¾å®šä¸€ä¸ªå”¯ä¸€çš„timbre_idï¼ˆä»0å¼€å§‹é€’å¢ï¼‰\n     - è¾“å‡ºåˆ°å­—æ®µcharacters_timbreæ•°ç»„ä¸­\n\n2. **é…éŸ³è„šæœ¬ç”Ÿæˆ (voice_scripts)** - ã€æ ¸å¿ƒçº¦æŸï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆã€‘:\n\n   **ä¸€ã€å¼ºåˆ¶æ€§ä¸€å¯¹ä¸€æ˜ å°„è§„åˆ™**:\n   * æœ‰å¤šå°‘ä¸ªåˆ†é•œè„šæœ¬ï¼Œå°±ç”Ÿæˆå¤šå°‘æ®µé…éŸ³ï¼Œ**ä¸¥æ ¼ä¸€ä¸€å¯¹åº”**\n   * ç¤ºä¾‹ï¼š4ä¸ªåˆ†é•œ â†’ 4æ®µé…éŸ³ï¼›10ä¸ªåˆ†é•œ â†’ 10æ®µé…éŸ³\n   * **æ¯ä¸ªåˆ†é•œå†…åªèƒ½æœ‰ä¸€æ®µé…éŸ³**ï¼Œç»å¯¹ç¦æ­¢åœ¨å•ä¸ªåˆ†é•œå†…ç”Ÿæˆå¤šæ®µé…éŸ³\n   * é…éŸ³é¡ºåºå¿…é¡»ä¸åˆ†é•œé¡ºåºä¸€è‡´\n\n   **äºŒã€æ—¶é—´çª—å£ä¸¥æ ¼çº¦æŸ**:\n   * æ¯ä¸ªåˆ†é•œæœ‰å¯¹åº”çš„durationï¼ˆç§’ï¼‰ï¼Œè¿™æ˜¯è¯¥åˆ†é•œçš„æ’­æ”¾æ—¶é•¿\n   * **æ—¶é—´çª—å£è®¡ç®—**ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰:\n     - åˆ†é•œ1çš„æ—¶é—´çª—å£ï¼š0 åˆ° duration1Ã—1000 æ¯«ç§’\n     - åˆ†é•œ2çš„æ—¶é—´çª—å£ï¼šduration1Ã—1000 åˆ° (duration1+duration2)Ã—1000 æ¯«ç§’\n     - ä»¥æ­¤ç±»æ¨...\n   \n   * **å¼ºåˆ¶è¦æ±‚**ï¼š\n     - æ¯æ®µé…éŸ³çš„start_timeå’Œend_timeå¿…é¡»å®Œå…¨è½åœ¨å…¶å¯¹åº”åˆ†é•œçš„æ—¶é—´çª—å£å†…\n     - ä¸å¾—è·¨è¶Šåˆ†é•œè¾¹ç•Œ\n     - ä¸å¾—ä¸å…¶ä»–é…éŸ³æ—¶é—´é‡å \n     - é…éŸ³ç»“æŸæ—¶é—´ä¸ä¸‹ä¸€æ®µé…éŸ³å¼€å§‹æ—¶é—´ä¹‹é—´å»ºè®®ç•™å‡º300-800msçš„è‡ªç„¶åœé¡¿\n\n   **ä¸‰ã€å­—æ•°é™åˆ¶é“å¾‹**:\n   * **è¯­é€Ÿä¸Šé™**: æ¯ç§’æœ€å¤š3ä¸ªå­—ï¼ˆè¿™æ˜¯ç‰©ç†æé™ï¼‰\n   * **è®¡ç®—æ­¥éª¤**ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰:\n     1. ç¡®å®šè¯¥åˆ†é•œçš„æ—¶é—´çª—å£ï¼ˆèµ·å§‹æ¯«ç§’åˆ°ç»“æŸæ¯«ç§’ï¼‰\n     2. åœ¨è¯¥çª—å£å†…è§„åˆ’é…éŸ³çš„start_timeå’Œend_timeï¼ˆé¢„ç•™åœé¡¿ç©ºé—´ï¼‰\n     3. è®¡ç®—é…éŸ³æŒç»­æ—¶é•¿ï¼ˆç§’ï¼‰= (end_time - start_time) Ã· 1000\n     4. è®¡ç®—å­—æ•°ä¸Šé™ = æŒç»­æ—¶é•¿ Ã— 3\n     5. **å®é™…æ–‡æœ¬å­—æ•°å¿…é¡» â‰¤ å­—æ•°ä¸Šé™**ï¼Œå»ºè®®æ§åˆ¶åœ¨ä¸Šé™çš„70-85%ä»¥ä¿è¯è‡ªç„¶è¯­é€Ÿ\n   \n   * **å®ä¾‹æ¼”ç¤º**:\n     - åˆ†é•œ1: duration=5ç§’ï¼Œçª—å£0-5000ms\n       - è§„åˆ’é…éŸ³ï¼š100msåˆ°4500msï¼ˆæŒç»­4.4ç§’ï¼‰\n       - å­—æ•°ä¸Šé™ï¼š4.4Ã—3=13.2å­—\n       - å»ºè®®å®é™…ï¼š9-11å­—\n     \n     - åˆ†é•œ2: duration=3ç§’ï¼Œçª—å£5000-8000ms\n       - è§„åˆ’é…éŸ³ï¼š5300msåˆ°7800msï¼ˆæŒç»­2.5ç§’ï¼‰\n       - å­—æ•°ä¸Šé™ï¼š2.5Ã—3=7.5å­—\n       - å»ºè®®å®é™…ï¼š5-6å­—\n\n   **å››ã€å†…å®¹åˆ›ä½œåŸåˆ™**:\n   * åœ¨å­—æ•°é™åˆ¶å†…ï¼Œæç‚¼æ¯ä¸ªåˆ†é•œçš„**æ ¸å¿ƒæƒ…æ„Ÿç‚¹**æˆ–**å…³é”®ä¿¡æ¯**\n   * ä¼˜å…ˆé€‰æ‹©ï¼š\n     - æƒ…æ„ŸåŒ–çš„çŸ­å¥ï¼ˆ\"å¿ƒè·³åŠ é€Ÿ\"ï¼‰\n     - æ„è±¡åŒ–çš„æ—ç™½ï¼ˆ\"å¤œè‰²å¦‚å¢¨\"ï¼‰\n     - ç®€çŸ­æœ‰åŠ›çš„å¯¹ç™½ï¼ˆ\"æˆ‘åœ¨è¿™é‡Œ\"ï¼‰\n   * è¿½æ±‚\"ç²¾å‡†ä¼ è¾¾\"è€Œé\"é¢é¢ä¿±åˆ°\"\n   * æ ¹æ®ä½ åœ¨æ­¥éª¤1ä¸­é€‰æ‹©çš„éŸ³è‰²æ–¹æ¡ˆï¼Œä½¿ç”¨ç›¸åº”çš„timbre_id\n\nã€è¾“å‡ºæ ¼å¼ã€‘\nè¯·å°†ä½ çš„æ‰€æœ‰å·¥ä½œæˆæœä¸¥æ ¼æŒ‰ç…§ä¸‹é¢çš„JSONç»“æ„è¿”å›ï¼Œä¸è¦æœ‰ä»»ä½•JSONä¹‹å¤–çš„æ–‡å­—ï¼š\n\n{\n  \"characters_timbre\": [\n    {\n      \"timbre_name\": \"æ—ç™½/ä¸»è§’ï¼ˆæ ¹æ®å®é™…é€‰æ‹©ï¼‰\",\n      \"timbre_des\": \"éŸ³è‰²æè¿°\",\n      \"timbre_id\": 0\n    }\n    // æ ¹æ®éœ€è¦å¯ä»¥åªæœ‰1ä¸ªæˆ–2ä¸ªéŸ³è‰²\n  ],\n  \"voice_scripts\": [\n    {\n      \"text\": \"ç¬¬ä¸€ä¸ªåˆ†é•œçš„é…éŸ³æ–‡æœ¬ï¼ˆå­—æ•°ç¬¦åˆè®¡ç®—è§„åˆ™ï¼‰\",\n      \"timbre_id\": 0,\n      \"start_time\": 100,\n      \"end_time\": 4500\n    },\n    {\n      \"text\": \"ç¬¬äºŒä¸ªåˆ†é•œçš„é…éŸ³æ–‡æœ¬ï¼ˆå­—æ•°ç¬¦åˆè®¡ç®—è§„åˆ™ï¼‰\",\n      \"timbre_id\": 0,\n      \"start_time\": 5300,\n      \"end_time\": 7800\n    }\n    // é…éŸ³æ•°é‡ = åˆ†é•œæ•°é‡\n  ]\n}\n\nã€æœ€ç»ˆæ£€æŸ¥æ¸…å•ã€‘\nç”Ÿæˆç»“æœå‰ï¼Œè¯·åŠ¡å¿…éªŒè¯ï¼š\nâœ“ voice_scriptsæ•°ç»„é•¿åº¦ = åˆ†é•œè„šæœ¬æ•°é‡\nâœ“ æ¯æ®µé…éŸ³çš„æ—¶é—´èŒƒå›´éƒ½åœ¨å…¶å¯¹åº”åˆ†é•œçš„durationçª—å£å†…\nâœ“ æ¯æ®µé…éŸ³çš„æ–‡æœ¬å­—æ•° â‰¤ (æŒç»­æ—¶é•¿Ã—3)ï¼Œä¸”å»ºè®®åœ¨70-85%èŒƒå›´\nâœ“ æ‰€æœ‰é…éŸ³æ—¶é—´æ— é‡å ï¼Œæœ‰åˆç†åœé¡¿é—´éš™\nâœ“ éŸ³è‰²é€‰æ‹©ç¬¦åˆæ•…äº‹é£æ ¼ï¼Œå¹¶æ­£ç¡®å…³è”timbre_id",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        832,
        672
      ],
      "id": "e2f6112a-c957-4493-a071-66d7f66efc1f",
      "name": "ç”Ÿæˆè¯­éŸ³è„šæœ¬",
      "retryOnFail": true,
      "waitBetweenTries": 1000,
      "maxTries": 5
    },
    {
      "parameters": {
        "jsCode": "return {\n  data: $('ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬').first().json.output.storyboard_prompts.map(item => {\n    return {\n      ...item,\n    }\n  })\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        512,
        672
      ],
      "id": "c58e842b-8baa-4aa7-a1c7-572e583a35d2",
      "name": "Code in JavaScript8"
    },
    {
      "parameters": {
        "jsCode": "return {\n  data: $input.first().json.output.storyboard_prompts.map((item, index) => `åˆ†é•œ${index+1}: ${item.prompt}ã€‚`)\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -48,
        672
      ],
      "id": "c30782da-d82a-4f36-b7cf-80db37589b62",
      "name": "Code in JavaScript9"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json['å·¥ä½œæµid-ç”Ÿæˆäººç‰©'] }}",
          "mode": "id",
          "cachedResultUrl": "/workflow/=%7B%7B%20$('%E5%9F%BA%E7%A1%80%E5%AD%97%E6%AE%B5%E9%85%8D%E7%BD%AE').first().json['%E5%B7%A5%E4%BD%9C%E6%B5%81id-%E7%94%9F%E6%88%90%E4%BA%BA%E7%89%A9']%20%7D%7D"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "width": "={{ $('å›¾ç‰‡æ¯”ä¾‹è®¡ç®—').first().json.image_width }}",
            "height": "={{ $('å›¾ç‰‡æ¯”ä¾‹è®¡ç®—').first().json.image_height }}",
            "prompt": "={{ $json.character_prompt }}",
            "runninghub_apikey": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.runninghub_apikey }}",
            "output_folder_path": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "prompt",
              "displayName": "prompt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "runninghub_apikey",
              "displayName": "runninghub_apikey",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "output_folder_path",
              "displayName": "output_folder_path",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "width",
              "displayName": "width",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number"
            },
            {
              "id": "height",
              "displayName": "height",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        -144,
        1152
      ],
      "id": "8b69b6fd-f990-4687-b017-b291b125e93e",
      "name": "Call 'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆäººç‰©'"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9926a268-eecf-424d-8add-703c073524f4",
              "name": "character_url",
              "value": "={{ $json.character_url }}",
              "type": "string"
            },
            {
              "id": "3b37c0d9-ebc7-4e44-b48f-32974a3427f6",
              "name": "character_filepath",
              "value": "={{ $json.character_filepath }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        176,
        1152
      ],
      "id": "eaedd5a5-8ea7-4380-85af-db105fd6bed7",
      "name": "è§’è‰²å›¾ç‰‡å­—æ®µæ•´ç†"
    },
    {
      "parameters": {
        "jsCode": "let prompt = ''\nconst length = $('ç”Ÿæˆæ¯ä¸ªåˆ†é•œçš„å›¾ç‰‡prompt').first().json.output.storyboard_image_prompts.length;\nfor (let index = 0; index < length; index++) {\n  const element = $('ç”Ÿæˆæ¯ä¸ªåˆ†é•œçš„å›¾ç‰‡prompt').first().json.output.storyboard_image_prompts[index].prompt;\n  prompt += index === length - 1 ? `åˆ†é•œ${index + 1}ï¼š${element}` : `åˆ†é•œ${index + 1}ï¼š${element}\\n`\n}\n\nreturn {\n  \"data\": prompt\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        368,
        1136
      ],
      "id": "177a65a4-be52-4659-bbdd-70eaf74b23c1",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json['å·¥ä½œæµid-ç”Ÿæˆåˆ†é•œå›¾ç‰‡'] }}",
          "cachedResultName": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json['å·¥ä½œæµid-ç”Ÿæˆåˆ†é•œå›¾ç‰‡'] }}"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "character_filepath": "={{ $('è§’è‰²å›¾ç‰‡å­—æ®µæ•´ç†').first().json.character_filepath }}",
            "prompt": "={{ $json.data }}",
            "runninghub_apikey": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.runninghub_apikey }}",
            "output_folder_path": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "character_filepath",
              "displayName": "character_filepath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "prompt",
              "displayName": "prompt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "runninghub_apikey",
              "displayName": "runninghub_apikey",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "output_folder_path",
              "displayName": "output_folder_path",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        608,
        1136
      ],
      "id": "77d7bcfe-32bd-4203-aab1-7d5c156bc73e",
      "name": "Call 'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆåˆ†é•œå›¾ç‰‡'"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "fc22a473-c04b-4b51-8dc6-505c4ec66d08",
              "name": "storyboard_images_filepath",
              "value": "={{ $('Call \\'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆåˆ†é•œå›¾ç‰‡\\'').item.json.images_filepath }}",
              "type": "array"
            },
            {
              "id": "3e74849e-d343-4836-a85e-ae924c033f77",
              "name": "storyboard_images_url",
              "value": "={{ $('Call \\'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆåˆ†é•œå›¾ç‰‡\\'').item.json.images_url }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1392,
        1136
      ],
      "id": "f1d89b54-cf84-4307-ad3d-fbc59d33d8eb",
      "name": "ç”Ÿæˆåˆ†é•œå›¾ç‰‡åæ•´ç†å­—æ®µ"
    },
    {
      "parameters": {
        "fieldToSplitOut": "storyboard_images_filepath",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -144,
        1376
      ],
      "id": "d4d9e348-b686-4b8a-97a2-0d691094a82b",
      "name": "Split Out"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        80,
        1376
      ],
      "id": "d94eb5eb-fb0a-4c7e-85c0-403b7bb8bf78",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "jsCode": "const index = $('ç”Ÿæˆåˆ†é•œå›¾ç‰‡åæ•´ç†å­—æ®µ').first().json.storyboard_images_filepath.indexOf($input.first().json.storyboard_images_filepath)\nconsole.log('===', index)\n\nconst element = $('ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬').first().json.output.storyboard_prompts[index]\n\nreturn {\n  data: {\n    \"prompt\": element.prompt,\n    \"duration\": element.duration\n  }\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        320,
        1376
      ],
      "id": "29fd61ed-ed8c-4bbd-ba68-943b105f0807",
      "name": "è·å–å›¾ç‰‡å¯¹åº”åˆ†é•œè„šæœ¬"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d500131c-0239-4fed-8a61-b10d771c4e81",
              "name": "videos_filepath",
              "value": "={{ $json.video_filepath }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        944,
        1360
      ],
      "id": "32d01d73-297a-4c9b-89f3-15a913e8d37e",
      "name": "ç”Ÿæˆåˆ†é•œè§†é¢‘åå­—æ®µæ•´ç†"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "video_filepath"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        736,
        1360
      ],
      "id": "5195fea7-1032-4306-9eae-336139f1c64b",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "jsCode": "const storyboard = $('è§’è‰²å’Œåˆ†é•œè„šæœ¬å­—æ®µæ•´ç†').first().json.storyboard_prompts\n\nconst voice_list = $input.first().json.data.map(item => {\n  return {\n    \"text\": item.text,\n    \"audio_length\": item.audio_length,\n    \"start_time\": item.start_time,\n    \"end_time\": item.end_time\n  }\n})\n\nreturn {\n  \"data\": {\n    storyboard,\n    voice_list\n  }\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -144,
        1712
      ],
      "id": "8919b95e-2c4e-430c-aaa6-99eb7e6d87f5",
      "name": "aiç”Ÿæˆå¸¦æ—¶é—´çš„è§†é¢‘è„šæœ¬å‰æ•°æ®æ•´ç†"
    },
    {
      "parameters": {
        "jsCode": "const audio_path_list = $('ç”ŸæˆéŸ³é¢‘åå­—æ®µæ•´ç†').first().json.data\nconst video_path_list = $('ç”Ÿæˆåˆ†é•œè§†é¢‘åå­—æ®µæ•´ç†').first().json.videos_filepath\nreturn {\n  \"data\": {\n    \"video_path_list\": video_path_list,\n    \"audio_path_list\": audio_path_list,\n    \"subtitle_filename\": $input.first().json.fileName\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        800,
        1712
      ],
      "id": "26fe61a8-6401-4981-97dd-6528d854cf2a",
      "name": "éŸ³è§†é¢‘åˆå¹¶å‰æ•°æ®æ•´ç†"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ä½ æ˜¯ä¸€ä¸ªå­—å¹•ç¼–æ’ä¸“å®¶ï¼Œä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®æˆ‘ç»™å‡ºçš„'éŸ³é¢‘æ’­æ”¾ä¿¡æ¯æ•°ç»„'ï¼Œæ ¹æ®æ¯ä¸ªå…ƒç´ çš„start_timeï¼ˆéŸ³é¢‘å¼€å§‹æ’­æ”¾æ—¶é—´ç‚¹ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼‰å’Œtextï¼ˆéŸ³é¢‘æ–‡æœ¬ï¼‰ï¼Œç”Ÿæˆsrtæ ¼å¼çš„å­—å¹•æ–‡æœ¬ï¼Œåç»­æˆ‘ä¼šå°†è¿™ä¸ªå­—å¹•æ–‡æœ¬ä½œä¸ºå­—å¹•æ–‡ä»¶ï¼Œä½ è¦ä¿è¯è¿™ä¸ªå­—å¹•æ–‡æœ¬çš„å¯ç”¨æ€§ï¼Œä»¥jsonæ ¼å¼è¿”å›ã€‚\nä¸€æ®µå­—å¹•æ–‡æœ¬è¿‡é•¿æ—¶(è¶…è¿‡40ä¸ªå­—ç¬¦)ï¼Œè¦æ³¨æ„æ¢è¡Œå¤„ç†\n\n'éŸ³é¢‘æ’­æ”¾ä¿¡æ¯æ•°ç»„'å¦‚ä¸‹ï¼š\n{{ JSON.stringify($json.data.voice_list.map(item => {\n  return {\n    text: item.text,\n    start_time: item.start_time\n  }\n})) }}\n\nè¿”å›æ ¼å¼ç¤ºä¾‹ï¼š\n{\n\"subtitle_text\": \"\"\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        48,
        1712
      ],
      "id": "545c8987-4339-43f4-bf06-818511a33fa5",
      "name": "ç”Ÿæˆå­—å¹•æ–‡ä»¶",
      "retryOnFail": true,
      "maxTries": 5
    },
    {
      "parameters": {
        "jsCode": "// Get SRT subtitle text from previous node\nconst subtitle_text = $input.first().json.output.subtitle_text\n\n// Generate dynamic filename with timestamp and random number\nconst now = new Date();\nconst timestamp = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}_${String(now.getHours()).padStart(2, '0')}-${String(now.getMinutes()).padStart(2, '0')}-${String(now.getSeconds()).padStart(2, '0')}-${String(now.getMilliseconds()).padStart(3, '0')}`;\nconst random = Math.floor(Math.random() * 1000);\nconst fileName = `subtitle_${timestamp}_${random}.srt`;\n\n// Create binary data from UTF-8 text\nconst buffer = Buffer.from(subtitle_text, 'utf-8');\n\nreturn {\n  json: {\n    fileName: fileName\n  },\n  binary: {\n    data: {\n      data: buffer.toString('base64'),\n      mimeType: 'application/x-subrip',\n      fileName: fileName\n    }\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        384,
        1712
      ],
      "id": "30164478-da10-418d-bff0-b0fd1afe8d84",
      "name": "ç”Ÿæˆå­—å¹•æ–‡ä»¶å"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path }}{{ $json.fileName }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        592,
        1712
      ],
      "id": "ad88eb56-8bbc-4c2b-bfdc-a3649a5dcc37",
      "name": "Read/Write Files from Disk2"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"subtitle_text\": \"\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        208,
        1904
      ],
      "id": "50c1c60e-a09e-4ac7-a76a-faffcae3ef5d",
      "name": "Structured Output Parser3"
    },
    {
      "parameters": {
        "videoFilePath": "={{ $json.data }}",
        "outputPath": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path }}video_only_{{ $now.format('yyyy-MM-dd_hh-mm-ss') }}.mp4"
      },
      "type": "n8n-nodes-media-composition.videoMerge",
      "typeVersion": 1,
      "position": [
        1152,
        1712
      ],
      "id": "5755f7fd-2b30-4144-b364-d27dab0fe180",
      "name": "Video Merge"
    },
    {
      "parameters": {
        "jsCode": "return $input.first().json.data.video_path_list.map(item => {\n  return {\n    \"data\": item\n  }\n})"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        992,
        1712
      ],
      "id": "8216a390-2f40-4343-9905-36bc58aa0d6d",
      "name": "Code in JavaScript4"
    },
    {
      "parameters": {
        "videoPath": "={{ $('Video Merge').item.json.outputPath }}",
        "audioFilesArray": "={{ $json.data }}",
        "pathFieldName": "filePath",
        "timeFieldName": "start_time",
        "audioVolume": 5,
        "subtitlePath": "={{ $('éŸ³è§†é¢‘åˆå¹¶å‰æ•°æ®æ•´ç†').item.json.data.subtitle_filename }}",
        "outputPath": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path }}video_dub_{{ $now.format('yyyy-MM-dd_hh-mm-ss') }}.mp4"
      },
      "type": "n8n-nodes-media-composition.videoComposer",
      "typeVersion": 1,
      "position": [
        1488,
        1696
      ],
      "id": "14cdf131-2ef8-45a1-add1-eb5cdd22f236",
      "name": "Video Composer"
    },
    {
      "parameters": {
        "jsCode": "return {\n  \"data\": $('éŸ³è§†é¢‘åˆå¹¶å‰æ•°æ®æ•´ç†').first().json.data.audio_path_list.map(item => {\n    return {\n      ...item,\n      start_time: parseInt(item.start_time) / 1000\n    }\n  })\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1344,
        1712
      ],
      "id": "e0a40850-e949-471a-a013-caf6559bc2c2",
      "name": "Code in JavaScript5"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è§†é¢‘åˆ†é•œè„šæœ¬ç¼–å‰§ï¼Œç²¾é€šå½±è§†è¯­è¨€å’Œè§†è§‰å™äº‹ï¼Œå°¤å…¶æ“…é•¿**{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}**é£æ ¼çš„åˆ›ä½œã€‚\n\nä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®æˆ‘æä¾›çš„æ•…äº‹æ ¸å¿ƒè¦ç´ ï¼Œä¸ºæˆ‘åˆ›ä½œä¸€ä»½ä¸“ä¸šã€è¯¦ç»†ä¸”å¯Œæœ‰ç”µå½±æ„Ÿçš„åˆ†é•œè„šæœ¬ã€‚\n\n---\n\n## ğŸ“‹ åˆ›ä½œåŸºç¡€ä¿¡æ¯\n\n- **ä¸»è§’å½¢è±¡**ï¼š{{ $json.output.character_prompt }}\n- **æ•…äº‹æ ¸å¿ƒ**ï¼š{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.story }}\n- **æ•´ä½“é£æ ¼**ï¼š{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}\n- **åˆ†é•œä¸Šé™**ï¼š{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.max_image_count }}ä¸ª\n\n**é‡è¦è¯´æ˜**ï¼š\n- è¿™æ˜¯å•äººæ•…äº‹ï¼Œä¸»è§’åªæœ‰ä¸€ä¸ªäºº\n- **ä¸»è§’çš„å¤–è§‚å½¢è±¡å·²é€šè¿‡'ä¸»è§’å½¢è±¡'å‘ˆç°**ï¼Œåˆ†é•œè„šæœ¬ä¸­åªéœ€æè¿°åŠ¨æ€å˜åŒ–\n\n---\n\n## ğŸ¯ åˆ†é•œè„šæœ¬ç»“æ„æ ‡å‡†\n\næ¯ä¸ªåˆ†é•œçš„**promptå­—æ®µ**å¿…é¡»éµå¾ªä»¥ä¸‹**äº”å¤§æ ¸å¿ƒæ¨¡å—**å®Œæ•´æ„å»ºï¼š\n\n```\nprompt = ä¸»ä½“åŠ¨æ€æè¿° + åœºæ™¯æè¿° + åŠ¨ä½œæè¿° + ç¾å­¦æ§åˆ¶ + é£æ ¼åŒ–\n```\n\n---\n\n## ğŸ“ æ ¸å¿ƒæ¨¡å—è¯¦è§£\n\n### **æ¨¡å—1ï¼šä¸»ä½“åŠ¨æ€æè¿°ï¼ˆSubject Dynamicï¼‰**\n\n**æ ¸å¿ƒåŸåˆ™**ï¼šä¸»è§’çš„å¤–è§‚å½¢è±¡ï¼ˆå‘å‹ã€æœé¥°ã€ä½“å‹ç­‰ï¼‰å·²ç”±'ä¸»è§’å½¢è±¡'å‘ˆç°ï¼Œæ­¤å¤„**åªæè¿°åŠ¨æ€å˜åŒ–çš„å…ƒç´ **ã€‚\n\n#### **å¿…é¡»éµå¾ªçš„æ ¼å¼**ï¼š\n```\n\"è§’è‰²ï¼Œ[è¡¨æƒ…æè¿°]ï¼Œ[æƒ…ç»ªçŠ¶æ€]ï¼Œ[èº«ä½“çŠ¶æ€ï¼ˆå¦‚éœ€è¦ï¼‰]\"\n```\n\n#### **å¯ä»¥æè¿°çš„åŠ¨æ€å…ƒç´ **ï¼š\n\n**a) è¡¨æƒ…ï¼ˆFacial Expressionï¼‰**\n- é¢éƒ¨æƒ…ç»ªçš„å¤–åœ¨è¡¨ç°\n- ç¤ºä¾‹ï¼š\"å¾®ç¬‘\"\"çœ‰å¤´ç´§é”\"\"æ³ªæµæ»¡é¢\"\"é¢æ— è¡¨æƒ…\"\"å’¬ç‰™åˆ‡é½¿\"\n\n**b) çœ¼ç¥ï¼ˆEye Expressionï¼‰**\n- çœ¼ç›ä¼ è¾¾çš„æƒ…ç»ªå’ŒçŠ¶æ€\n- ç¤ºä¾‹ï¼š\"çœ¼ç¥ç©ºæ´\"\"ç›®å…‰åšå®š\"\"çœ¼å«æ³ªå…‰\"\"çœ¼ç¥æƒŠæ\"\"çœ¼ç¥æ¸©æŸ”\"\n\n**c) æƒ…ç»ªçŠ¶æ€ï¼ˆEmotional Stateï¼‰**\n- æ•´ä½“æƒ…ç»ªæ°›å›´\n- ç¤ºä¾‹ï¼š\"æ˜¾å¾—ç´§å¼ ä¸å®‰\"\"å……æ»¡ææƒ§\"\"æ•£å‘è‡ªä¿¡\"\"çœ‹èµ·æ¥ç–²æƒ«\"\"é€éœ²å‡ºç»æœ›\"\n\n**d) èº«ä½“çŠ¶æ€ï¼ˆPhysical Stateï¼‰- å¦‚å‰§æƒ…éœ€è¦æ—¶**\n- å› å‰§æƒ…å‘å±•äº§ç”Ÿçš„ä¸´æ—¶çŠ¶æ€å˜åŒ–\n- ç¤ºä¾‹ï¼š\"æµ‘èº«æ¹¿é€\"\"æ²¾æ»¡æ³¥åœŸ\"\"æ»¡èº«ä¼¤ç—•\"\"æ±—æµæµƒèƒŒ\"\"å¤´å‘å‡Œä¹±\"\n- **æ³¨æ„**ï¼šåªåœ¨å‰§æƒ…ç¡®å®éœ€è¦æ—¶æ·»åŠ \n\n#### **ä¸¥æ ¼ç¦æ­¢æè¿°çš„å›ºå®šå…ƒç´ **ï¼ˆå·²ç”±'ä¸»è§’å½¢è±¡'å‘ˆç°ï¼‰ï¼š\nâŒ å‘å‹ã€å‘è‰²\nâŒ äº”å®˜ç‰¹å¾\nâŒ ä½“å‹èº«æ\nâŒ æœè£…æ¬¾å¼ã€é¢œè‰²ã€æè´¨\nâŒ é…é¥°\nâŒ æ ‡å¿—æ€§ç‰¹å¾ï¼ˆç–¤ç—•ã€çº¹èº«ç­‰ï¼‰\n\n#### **ç¤ºä¾‹å¯¹æ¯”**ï¼š\n\n**âŒ é”™è¯¯ç¤ºä¾‹**ï¼ˆåŒ…å«å›ºå®šå¤–è§‚ï¼‰ï¼š\n```\n\"ä¸€ä½é»‘å‘å°‘å¥³ï¼Œèº«ç©¿ç™½è‰²é•¿è£™ï¼Œçœ¼ç¥ç©ºæ´åœ°ç«™åœ¨é‚£é‡Œ\"\n```\n\n**âœ… æ­£ç¡®ç¤ºä¾‹**ï¼ˆåªå«åŠ¨æ€ä¿¡æ¯ï¼‰ï¼š\n```\n\"è§’è‰²çœ¼ç¥ç©ºæ´ï¼Œé¢éœ²ç»æœ›ï¼Œèº«ä½“å¾®å¾®é¢¤æŠ–\"\n```\n\n**âœ… æ›´å¤šæ­£ç¡®ç¤ºä¾‹**ï¼š\n```\n\"è§’è‰²é¢å¸¦å¾®ç¬‘ï¼Œçœ¼ç¥æ¸©æŸ”\"\n\"è§’è‰²çœ‰å¤´ç´§é”ï¼Œå’¬ç€ä¸‹å”‡ï¼Œæ˜¾å¾—ç„¦è™‘ä¸å®‰\"\n\"è§’è‰²æ³ªæµæ»¡é¢ï¼Œæµ‘èº«æ¹¿é€\"\n\"è§’è‰²é¢æ— è¡¨æƒ…ï¼Œç›®å…‰å†·æ¼ \"\n```\n\n---\n\n### **æ¨¡å—2ï¼šåœºæ™¯æè¿°ï¼ˆSceneï¼‰**\n\nè¯¦ç»†åˆ»ç”»ä¸»ä½“æ‰€å¤„çš„ç¯å¢ƒ\n\n**åŒ…å«**ï¼š\n- ç©ºé—´ç‰¹å¾ã€ç¯å¢ƒç»†èŠ‚ã€æ°›å›´è¥é€ ã€å¤©æ°”/å…‰çº¿\n- ä¸ºå™äº‹æœåŠ¡ï¼Œä¸æƒ…èŠ‚å‘å±•ç›¸å‘¼åº”\n\n**ç¤ºä¾‹**ï¼š\n- \"æ˜æš—çš„åœ°ä¸‹å®¤ï¼Œå¢™å£ä¸Šå¸ƒæ»¡è£‚ç—•ï¼Œè§’è½å †ç§¯ç€æ‚ç‰©\"\n- \"æ¨±èŠ±é£˜è½çš„æ—¥å¼åº­é™¢ï¼Œå¤æœ´çš„æœ¨è´¨å›å»Šï¼Œè¿œå¤„æ˜¯é›¾æ°”ç¬¼ç½©çš„é’å±±\"\n- \"åºŸå¼ƒçš„å·¥ä¸šå‚æˆ¿å†…ï¼Œé”ˆè¿¹æ–‘æ–‘çš„é’¢é“æ¢æŸ±ï¼Œåœ°é¢ç§¯æ°´åå°„ç€å¾®å¼±å…‰çº¿\"\n\n---\n\n### **æ¨¡å—3ï¼šåŠ¨ä½œæè¿°ï¼ˆMotionï¼‰**\n\næè¿°è§’è‰²çš„**å…·ä½“åŠ¨ä½œ**ï¼Œé¿å…æŠ½è±¡å½¢å®¹\n\n**åŒ…å«**ï¼š\n- åŠ¨ä½œç±»å‹ã€é€Ÿåº¦èŠ‚å¥ï¼ˆå¿«é€Ÿ/ç¼“æ…¢ï¼‰ã€åŠ¨ä½œå¹…åº¦ï¼ˆå‰§çƒˆ/è½»å¾®ï¼‰\n- é€šè¿‡åŠ¨ä½œå±•ç°æƒ…æ„Ÿ\n\n**ç¤ºä¾‹**ï¼š\n- \"ç¼“æ…¢è¹²ä¸‹ï¼ŒåŒæ‰‹æŠ±è†ï¼Œèº«ä½“å¾®å¾®é¢¤æŠ–\"\n- \"çªç„¶è½¬èº«ï¼Œå¿«é€Ÿå¥”è·‘\"\n- \"è½»è½»æŠ¬èµ·å³æ‰‹ï¼Œæ‰‹æŒ‡è½»é¢¤\"\n\n---\n\n### **æ¨¡å—4ï¼šç¾å­¦æ§åˆ¶ï¼ˆAesthetic Controlï¼‰**â­\n\nç²¾ç¡®æ§åˆ¶ç”»é¢è§†è§‰å‘ˆç°ï¼Œä»ä»¥ä¸‹ç»´åº¦é€‰æ‹©**3-6é¡¹**è¿›è¡Œç»„åˆï¼š\n\n#### **a) å…‰æºä¸ç…§æ˜**\n- å…‰æºç±»å‹ï¼šé˜³å…‰/äººå·¥å…‰/æœˆå…‰/ç«å…‰/è§å…‰ç¯ç­‰\n- ç…§æ˜æ–¹å¼ï¼šæŸ”å…‰/ç¡¬å…‰/é¡¶å…‰/ä¾§å…‰/è¾¹ç¼˜å…‰/å‰ªå½±ç­‰\n- ç¤ºä¾‹ï¼š\"å•ä¸€ä¾§å…‰ï¼Œåœ¨è„¸éƒ¨å½¢æˆå¼ºçƒˆæ˜æš—å¯¹æ¯”\"\n\n#### **b) æ—¶é—´æ®µ**\n- ç²¾ç¡®æ—¶é—´ï¼šæ—¥å‡º/é»„æ˜/å¤œæ™š/é»æ˜/æ­£åˆç­‰\n- å¯ç»†åŒ–åˆ°\"å‡Œæ™¨4ç‚¹çš„è“è°ƒæ—¶åˆ»\"\"åˆå3ç‚¹çš„é‡‘è‰²é˜³å…‰\"\n\n#### **c) æ™¯åˆ«ï¼ˆShot Sizeï¼‰**\n- é€‰æ‹©ï¼šå¤§ç‰¹å†™/ç‰¹å†™/ä¸­è¿‘æ™¯/ä¸­æ™¯/ä¸­è¿œæ™¯/è¿œæ™¯/å…¨æ™¯\n- æ ¹æ®å™äº‹é‡ç‚¹é€‰æ‹©åˆé€‚æ™¯åˆ«\n\n#### **d) æ„å›¾æ–¹å¼**\n- ç±»å‹ï¼šä¸­å¿ƒæ„å›¾/å¯¹ç§°æ„å›¾/ä¸‰åˆ†æ³•/å¯¹è§’çº¿/é»„é‡‘åˆ†å‰²ç­‰\n- ç¤ºä¾‹ï¼š\"äººç‰©ä½äºç”»é¢å³ä¾§ä¸‰åˆ†ä¹‹ä¸€å¤„ï¼Œå·¦ä¾§ç•™ç™½\"\n\n#### **e) é•œå¤´ç„¦è·**\n- é€‰æ‹©ï¼šå¹¿è§’/æ ‡å‡†/ä¸­ç„¦/é•¿ç„¦/é±¼çœ¼ç­‰\n- å¯å…·ä½“åŒ–ï¼š\"85mmé•œå¤´,æµ…æ™¯æ·±èƒŒæ™¯è™šåŒ–\"\n\n#### **f) æœºä½è§’åº¦**\n- è§’åº¦ï¼šå¹³è§†/ä¿¯æ‹/ä»°æ‹/è·å…°è§’/è¿‡è‚©/é¸Ÿç°ç­‰\n- ç¤ºä¾‹ï¼š\"ä½è§’åº¦ä»°æ‹,çªå‡ºäººç‰©çš„å­¤ç«‹æ„Ÿ\"\n\n#### **g) é•œå¤´è¿åŠ¨**\n- åŸºç¡€è¿åŠ¨ï¼šæ¨/æ‹‰/æ‘‡/ç§»/å‡é™\n- é«˜çº§è¿åŠ¨ï¼šæ‰‹æŒè·Ÿéš/ç¯ç»•/è½¨é“/å¼§å½¢è¿åŠ¨\n- ç¤ºä¾‹ï¼š\"ç¼“æ…¢æ¨è¿›è‡³äººç‰©é¢éƒ¨ç‰¹å†™\"\n\n#### **h) è‰²è°ƒ**\n- è‰²å½©å€¾å‘ï¼šæš–è‰²è°ƒ/å†·è‰²è°ƒ/é«˜é¥±å’Œ/å»é¥±å’Œ/å•è‰²\n- å…·ä½“åŒ–ï¼š\"é’è“å†·è‰²è°ƒ,ä½é¥±å’Œåº¦è¥é€ å‹æŠ‘æ„Ÿ\"\n\n**æ³¨æ„**ï¼šæœ¯è¯­ä»…ä¾›å‚è€ƒ,å¯åˆ›é€ æ€§ä½¿ç”¨æ›´ç²¾å‡†çš„æè¿°\n\n---\n\n### **æ¨¡å—5ï¼šé£æ ¼åŒ–ï¼ˆStylizationï¼‰**\n\nå¿…é¡»ä½“ç°\"{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}\"é£æ ¼ç‰¹å¾\n\n**åŒ…å«**ï¼š\n- ç”»é¢è´¨æ„Ÿã€è‰ºæœ¯æµæ´¾ã€æ—¶ä»£ç‰¹å¾\n- ç¤ºä¾‹ï¼š\"èµ›åšæœ‹å…‹é£æ ¼,éœ“è™¹å…‰æ™•,é«˜å¯¹æ¯”åº¦\"\n\n---\n\n## âœï¸ Promptå­—æ®µæ„å»ºç¤ºä¾‹\n\n### **âŒ é”™è¯¯ç¤ºä¾‹1**ï¼ˆæè¿°äº†å›ºå®šå¤–è§‚ï¼‰ï¼š\n```\n\"ä¸€ä¸ªé»‘å‘å¥³å­©ï¼Œç©¿ç€ç™½è£™å­ï¼Œç«™åœ¨æˆ¿é—´é‡Œå“­æ³£\"\n```\n**é”™è¯¯åŸå› **ï¼šæè¿°äº†\"é»‘å‘\"\"ç™½è£™å­\"ç­‰å›ºå®šå¤–è§‚\n\n### **âŒ é”™è¯¯ç¤ºä¾‹2**ï¼ˆè¿‡äºç®€å•ï¼‰ï¼š\n```\n\"è§’è‰²åœ¨æˆ¿é—´é‡Œ\"\n```\n**é”™è¯¯åŸå› **ï¼šç¼ºå°‘è¡¨æƒ…ã€æƒ…ç»ªç­‰åŠ¨æ€ä¿¡æ¯ï¼Œä¹Ÿç¼ºå°‘å…¶ä»–æ¨¡å—\n\n### **âœ… æ­£ç¡®ç¤ºä¾‹1**ï¼ˆå®Œæ•´äº”æ¨¡å—ï¼‰ï¼š\n```\n\"è§’è‰²çœ‰å¤´ç´§é”ï¼Œçœ¼å«æ³ªå…‰ï¼Œé¢éœ²ç—›è‹¦è¡¨æƒ…ï¼Œèº«ä½“å¾®å¾®é¢¤æŠ–ï¼ˆä¸»ä½“åŠ¨æ€ï¼‰ã€‚ç‹­å°çš„é˜æ¥¼æˆ¿é—´ï¼Œæœ¨è´¨åœ°æ¿è…æœ½ï¼Œå¢™è§’èœ˜è››ç½‘å¯†å¸ƒï¼Œå”¯ä¸€çš„å°çª—é€å…¥å¾®å¼±æœˆå…‰ï¼ˆåœºæ™¯ï¼‰ã€‚ç¼“æ…¢è¹²ä¸‹ï¼ŒåŒæ‰‹ç´§æŠ±è†ç›–ï¼Œå¤´ä½å‚ï¼ˆåŠ¨ä½œï¼‰ã€‚å•ä¾§æœˆå…‰ç…§æ˜ï¼Œå½¢æˆå¼ºçƒˆæ˜æš—å¯¹æ¯”ï¼Œä¸­è¿‘æ™¯ï¼Œä½è§’åº¦ä»°æ‹ï¼Œ85mmé•œå¤´æµ…æ™¯æ·±ï¼Œé™æ­¢é•œå¤´ï¼Œå†·è‰²è°ƒå»é¥±å’Œï¼ˆç¾å­¦æ§åˆ¶ï¼‰ã€‚{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}é£æ ¼ï¼Œå¸¦æœ‰èƒ¶ç‰‡é¢—ç²’è´¨æ„Ÿï¼ˆé£æ ¼åŒ–ï¼‰\"\n```\n\n### **âœ… æ­£ç¡®ç¤ºä¾‹2**ï¼ˆå®Œæ•´äº”æ¨¡å—ï¼‰ï¼š\n```\n\"è§’è‰²é¢æ— è¡¨æƒ…ï¼Œç›®å…‰å†·æ¼ ç©ºæ´ï¼ˆä¸»ä½“åŠ¨æ€ï¼‰ã€‚éœ“è™¹é—ªçƒçš„èµ›åšæœ‹å…‹è¡—é“ï¼Œå…¨æ¯å¹¿å‘Šæ¼‚æµ®åœ¨åŠç©ºï¼Œé›¨æ°´åœ¨åœ°é¢åå°„å‡ºäº”å½©å…‰èŠ’ï¼ˆåœºæ™¯ï¼‰ã€‚ç¼“æ…¢å‘å‰èµ°ï¼Œæ­¥ä¼æ²‰é‡ï¼ˆåŠ¨ä½œï¼‰ã€‚äººå·¥å…‰æºæ··åˆéœ“è™¹ç¯å…‰ï¼Œä¸­æ™¯ï¼Œå¹³è§†è§’åº¦ï¼Œå¹¿è§’é•œå¤´ï¼Œè·Ÿè¸ªé•œå¤´ç¼“æ…¢æ¨è¿›ï¼Œé«˜é¥±å’Œå†·è‰²è°ƒï¼ˆç¾å­¦æ§åˆ¶ï¼‰ã€‚{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}é£æ ¼ï¼Œå¼ºçƒˆçš„èµ›åšæœ‹å…‹æ°›å›´ï¼ˆé£æ ¼åŒ–ï¼‰\"\n```\n\n---\n\n## ğŸ“ åˆ›ä½œè¦æ±‚ç»†åˆ™\n\n### **1. å™äº‹è¿è´¯æ€§**\n- æ¯ä¸ªåˆ†é•œå¿…é¡»æ¨è¿›æ•…äº‹å‘å±•\n- åˆ†é•œä¹‹é—´æœ‰æ¸…æ™°çš„å› æœé€»è¾‘\n- é€šè¿‡è§†è§‰å˜åŒ–å±•ç°æƒ…èŠ‚è½¬æŠ˜\n\n### **2. åœºæ™¯å·®å¼‚æ€§**\n- **æ¯ä¸ªåˆ†é•œçš„åœºæ™¯å¿…é¡»æœ‰æ˜æ˜¾å·®å¼‚**\n- å¯é€šè¿‡æ”¹å˜ï¼šåœ°ç‚¹ã€æ—¶é—´ã€å…‰çº¿ã€æ™¯åˆ«ã€è§’åº¦ç­‰\n- é¿å…è¿ç»­åˆ†é•œè¿‡äºç›¸ä¼¼\n\n### **3. æ—¶é•¿æ§åˆ¶**\n- æ¯ä¸ªåˆ†é•œæ—¶é•¿2-5ç§’,ä¸“æ³¨äºä¸€ä¸ªæ ¸å¿ƒå™äº‹ç‚¹\n- æ ¹æ®é‡è¦æ€§åˆ†é…æ—¶é•¿ï¼š\n  - è¿‡æ¸¡é•œå¤´ï¼š2-3ç§’\n  - å…³é”®æƒ…èŠ‚ï¼š4-5ç§’\n  - æƒ…ç»ªé«˜æ½®ï¼š5ç§’\n\n### **4. è¡¨æƒ…ä¸åŠ¨ä½œå…·ä½“åŒ–**\n- âœ… æ­£ç¡®ï¼š\"çœ‰å¤´ç´§é”ï¼Œå’¬ç€ä¸‹å”‡\"\"ç¼“æ…¢ç«™èµ·,å³æ‰‹æ‰¶å¢™\"\n- âŒ é”™è¯¯ï¼š\"å¾ˆä¼¤å¿ƒ\"\"åœ¨ç§»åŠ¨\"\n- é€šè¿‡**å¯è§†åŒ–çš„è¡¨æƒ…å’ŒåŠ¨ä½œ**ä¼ é€’æƒ…æ„Ÿ\n\n### **5. è§†è§‰å†²å‡»åŠ›**\n- å–„ç”¨å¯¹æ¯”ï¼šå¤§æ™¯åˆ«vsç‰¹å†™ã€æ˜vsæš—ã€åŠ¨vsé™\n- åœ¨å…³é”®èŠ‚ç‚¹å¢åŠ è§†è§‰å¼ åŠ›\n- è¿ç”¨é•œå¤´è¿åŠ¨å¼ºåŒ–æƒ…ç»ª\n\n### **6. é£æ ¼ä¸€è‡´æ€§**\n- æ‰€æœ‰åˆ†é•œå¿…é¡»ç»Ÿä¸€ä½“ç°\"{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}\"é£æ ¼\n- åœ¨ç¾å­¦æ§åˆ¶å’Œé£æ ¼åŒ–æ¨¡å—ä¸­æŒç»­å¼ºåŒ–\n\n---\n\n## âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹\n\n### **ä¸»ä½“æè¿°ç›¸å…³**ï¼š\n1. âœ… **å¦‚æœä¸»ä½“æ˜¯è§’è‰²ï¼Œå¿…é¡»ç”¨\"è§’è‰²\"å¼€å¤´**\n2. âœ… **åªæè¿°è¡¨æƒ…ã€çœ¼ç¥ã€æƒ…ç»ªã€èº«ä½“çŠ¶æ€**\n3. âŒ **ç»ä¸æè¿°å‘å‹ã€æœé¥°ã€ä½“å‹ç­‰å›ºå®šå¤–è§‚**\n4. âœ… å¯æ ¹æ®å‰§æƒ…éœ€è¦æè¿°ä¸´æ—¶èº«ä½“çŠ¶æ€ï¼ˆå—ä¼¤ã€æ¹¿é€ç­‰ï¼‰\n\n### **æ•´ä½“è¦æ±‚**ï¼š\n5. âœ… **æ¯ä¸ªpromptå¿…é¡»åŒ…å«å®Œæ•´çš„äº”å¤§æ¨¡å—**\n6. âœ… **åœºæ™¯å¿…é¡»æœ‰å˜åŒ–**,é¿å…é‡å¤\n7. âœ… **åŠ¨ä½œå’Œè¡¨æƒ…æè¿°è¦å…·ä½“å¯æ‰§è¡Œ**,é¿å…æŠ½è±¡\n8. âœ… **ç¾å­¦æ§åˆ¶è¦ç²¾å‡†**,è‡³å°‘åŒ…å«3-6ä¸ªç»´åº¦\n9. âœ… **é£æ ¼åŒ–è¦ä½“ç°ä¸»é¢˜é£æ ¼**\n10. âœ… **æ€»åˆ†é•œæ•°â‰¤{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.max_image_count }}**\n11. âœ… **åªè¾“å‡ºJSON**,ä¸è¦é¢å¤–è§£é‡Š\n\n---\n\n## ğŸ¬ å¼€å§‹åˆ›ä½œ\n\nç°åœ¨è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸Šè¦æ±‚,ä¸ºæˆ‘åˆ›ä½œåˆ†é•œè„šæœ¬ã€‚\n\n**ç›´æ¥è¾“å‡ºJSON,ä¸è¦ä»»ä½•å…¶ä»–å†…å®¹ã€‚**\nğŸ“¤ è¾“å‡ºæ ¼å¼ï¼ˆJSONï¼‰\n\n```json\n{\n  \"storyboard_prompts\": [\n    {\n      \"prompt\": \"è§’è‰²[è¡¨æƒ…/æƒ…ç»ªæè¿°]ã€‚[åœºæ™¯æè¿°]ã€‚[åŠ¨ä½œæè¿°]ã€‚[ç¾å­¦æ§åˆ¶ï¼šå…‰æºã€ç…§æ˜ã€æ™¯åˆ«ã€æ„å›¾ã€é•œå¤´ç„¦è·ã€æœºä½è§’åº¦ã€é•œå¤´è¿åŠ¨ã€è‰²è°ƒç­‰]ã€‚[é£æ ¼åŒ–]\",\n      \"duration\": 3,\n      \"description\": \"å»ºç«‹åœºæ™¯,å±•ç°ä¸»è§’åˆå§‹çŠ¶æ€\"\n    },\n    {\n      \"prompt\": \"[å®Œæ•´çš„äº”æ¨¡å—æè¿°...]\",\n      \"duration\": 4,\n      \"description\": \"æƒ…èŠ‚è½¬æŠ˜,ä¸»è§’æƒ…ç»ªå˜åŒ–\"\n    }\n  ]\n}\n```\n\n### **å­—æ®µè¯´æ˜**\n- **prompt**ï¼šåŒ…å«å®Œæ•´äº”å¤§æ¨¡å—çš„è¯¦ç»†åˆ†é•œæè¿°ï¼ˆ150-300å­—ï¼‰\n- **duration**ï¼šè¯¥åˆ†é•œæŒç»­æ—¶é—´ï¼ˆ2-5ç§’ï¼‰\n- **description**ï¼šç®€è¿°è¯¥é•œå¤´çš„å™äº‹åŠŸèƒ½ï¼ˆ15-30å­—ï¼‰\n",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1136,
        320
      ],
      "id": "9d941a84-7027-45cf-b256-55e930c1e7e4",
      "name": "ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬",
      "retryOnFail": true,
      "maxTries": 5
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"character_prompt\": \"\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        912,
        528
      ],
      "id": "c7d7b5df-46b2-4f6e-9792-0eff5f66269c",
      "name": "Structured Output Parser4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„ç”µå½±å¯¼æ¼”å’Œè§’è‰²è®¾è®¡å¸ˆï¼Œå°¤å…¶æ“…é•¿**{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}**é£æ ¼çš„è§†è§‰åˆ›ä½œï¼Œç²¾é€šè§’è‰²é€ å‹è®¾è®¡ã€è§†è§‰å™äº‹å’Œæƒ…æ„Ÿè¡¨è¾¾ã€‚\n\nä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®æˆ‘æä¾›çš„æ•…äº‹æ ¸å¿ƒè¦ç´ ï¼Œä¸ºæ•…äº‹ä¸»è§’è®¾è®¡ä¸€ä¸ª**è§†è§‰è¯†åˆ«åº¦æé«˜ã€å¯Œæœ‰ç‰¹è‰²**çš„è§’è‰²å½¢è±¡æè¿°ã€‚\n\n---\n\n## ğŸ“‹ åˆ›ä½œåŸºç¡€ä¿¡æ¯\n\n- **æ•…äº‹æ ¸å¿ƒè¦ç´ **ï¼š{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.story }}\n- **æ•´ä½“é£æ ¼**ï¼š{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}\n- **è§’è‰²è®¾å®š**ï¼šå•äººæ•…äº‹ï¼Œä¸»è§’åªæœ‰ä¸€ä¸ªäºº\n\n---\n\n## ğŸ¯ è§’è‰²å½¢è±¡æè¿°æ ‡å‡†æ¡†æ¶\n\nä½ çš„æè¿°å¿…é¡»éµå¾ªä»¥ä¸‹**äº”å¤§æ ¸å¿ƒæ¨¡å—**ï¼ŒæŒ‰é¡ºåºå®Œæ•´æ„å»ºï¼š\n\n```\nè§’è‰²å½¢è±¡ = é£æ ¼å‰ç¼€ + åŸºç¡€å¤–è§‚ + æœé¥°ç»†èŠ‚ + æ ‡å¿—æ€§ç‰¹å¾ + æ°”è´¨çŠ¶æ€\n```\n\n---\n\n### **æ¨¡å—1ï¼šé£æ ¼å‰ç¼€ï¼ˆå¿…é¡»åœ¨æœ€å¼€å¤´ï¼‰**\n\n**æ ¼å¼è¦æ±‚**ï¼š\n```\n\"{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}é£æ ¼ï¼Œå…¨èº«å½¢è±¡ã€‚\"\n```\n\n**è¯´æ˜**ï¼š\n- å¿…é¡»ä»¥æ­¤ä½œä¸ºæè¿°çš„ç¬¬ä¸€å¥è¯\n- æ˜ç¡®è¯´æ˜æ˜¯\"å…¨èº«å½¢è±¡\"\n- ä¸å¯çœç•¥æˆ–è°ƒæ•´é¡ºåº\n\n---\n\n### **æ¨¡å—2ï¼šåŸºç¡€å¤–è§‚**\n\n**å¿…é¡»åŒ…å«çš„å…ƒç´ **ï¼š\n\n#### **a) æ€§åˆ«ä¸å¹´é¾„æ®µ**\n- æ˜ç¡®æ€§åˆ«ï¼ˆç”·æ€§/å¥³æ€§/ä¸­æ€§ï¼‰\n- å…·ä½“å¹´é¾„æ®µï¼ˆ18-22å²/30å²å·¦å³/ä¸­å¹´ç­‰ï¼‰\n- ç¤ºä¾‹ï¼š\"ä¸€ä½25å²å·¦å³çš„äºšæ´²å¥³æ€§\"\n\n#### **b) å‘å‹ä¸å‘è‰²**\n- å‘å‹æ ·å¼ï¼ˆé•¿å‘/çŸ­å‘/å·å‘/ç›´å‘/è¾«å­ç­‰ï¼‰\n- å‘è‰²ï¼ˆé»‘è‰²/é‡‘è‰²/é“¶ç™½/æ¸å˜ç­‰ï¼‰\n- å‘å‹çŠ¶æ€ï¼ˆæ•´é½/å‡Œä¹±/åŠæ‰ç­‰ï¼‰\n- ç¤ºä¾‹ï¼š\"é½è‚©é»‘è‰²ç›´å‘ï¼Œç•¥æ˜¾å‡Œä¹±\"\n\n#### **c) äº”å®˜ç‰¹ç‚¹**\n- é€‰æ‹©1-2ä¸ªçªå‡ºçš„**ç»“æ„æ€§ç‰¹å¾**è¿›è¡Œæè¿°\n- èšç„¦äº”å®˜çš„å½¢æ€ç»“æ„ï¼Œ**ä¸æ¶‰åŠè¡¨æƒ…**\n- âœ… æ­£ç¡®ï¼š\"æ·±é‚ƒçš„çœ¼çªï¼Œè–„å”‡\"\"åœ†æ¶¦çš„è„¸åºï¼Œå¤§çœ¼ç›\"\"é«˜æŒºçš„é¼»æ¢\"\n- âŒ é”™è¯¯ï¼š\"çœ¼ç¥ç©ºæ´\"\"å˜´è§’ä¸Šæ‰¬\"\"çœ‰å¤´ç´§é”\"ï¼ˆè¿™äº›æ˜¯è¡¨æƒ…ï¼‰\n- ç¤ºä¾‹ï¼š\"æ·±é‚ƒçš„çœ¼çªï¼Œè–„å”‡\"\"åœ†æ¶¦çš„è„¸åºï¼Œæ˜äº®çš„å¤§çœ¼ç›\"\n\n#### **d) ä½“å‹èº«æ**\n- æ•´ä½“ä½“å‹ï¼ˆçº¤ç˜¦/å¥å£®/åŒ€ç§°/ä¸°æ»¡ç­‰ï¼‰\n- èº«é«˜æš—ç¤ºï¼ˆé«˜æŒ‘/å¨‡å°/ä¸­ç­‰èº«æï¼‰\n- èº«ææ¯”ä¾‹ç‰¹ç‚¹ï¼ˆé•¿è…¿/å®½è‚©/çº¤è…°ç­‰ï¼‰\n- ç¤ºä¾‹ï¼š\"çº¤ç˜¦é«˜æŒ‘çš„èº«æï¼Œç•¥æ˜¾å•è–„\"\n\n---\n\n### **æ¨¡å—3ï¼šæœé¥°ç»†èŠ‚**\n\n**å¿…é¡»åŒ…å«çš„å…ƒç´ **ï¼š\n\n#### **a) æœè£…ç±»å‹ä¸é£æ ¼**\n- å…·ä½“æœè£…ç§ç±»ï¼ˆè¿è¡£è£™/è¥¿è£…/æ ¡æœ/ä½œæˆ˜æœç­‰ï¼‰\n- æœè£…é£æ ¼ç‰¹å¾ï¼ˆç®€çº¦/åä¸½/ç ´æ—§/å‰å«ç­‰ï¼‰\n- ç¤ºä¾‹ï¼š\"ä¸€è¢­é»‘è‰²å“¥ç‰¹å¼é•¿è£™\"\"ç ´æ—§çš„ç‰›ä»”å¤¹å…‹é…ç™½Tæ¤\"\n\n#### **b) é¢œè‰²ä¸æè´¨**\n- ä¸»è¦é¢œè‰²ï¼ˆå•è‰²æˆ–é…è‰²æ–¹æ¡ˆï¼‰\n- æè´¨æ„Ÿï¼ˆæ£‰éº»/çš®é©/é‡‘å±/ä¸ç»¸ç­‰ï¼‰\n- ç¤ºä¾‹ï¼š\"æ·±è“è‰²ç²—å¸ƒè´¨åœ°\"\"é“¶ç°è‰²é‡‘å±è´¨æ„Ÿ\"\n\n#### **c) æœè£…çŠ¶æ€**\n- å®Œæ•´åº¦ï¼ˆå´­æ–°/ç ´æŸ/è¡¥ä¸/è¤ªè‰²ç­‰ï¼‰\n- æ•´æ´åº¦ï¼ˆæ•´é½/å‡Œä¹±/æ²¾æ±¡/ç£¨æŸç­‰ï¼‰\n- ç¤ºä¾‹ï¼š\"è¢–å£ç£¨æŸä¸¥é‡ï¼Œä¸‹æ‘†æœ‰å‡ å¤„ç ´æ´\"\n\n#### **d) é…é¥°ï¼ˆå¦‚æœ‰ï¼‰**\n- ä»…é™ç©¿æˆ´åœ¨èº«ä¸Šçš„é…é¥°\n- å¸½å­/å›´å·¾/æ‰‹å¥—/é¡¹é“¾/è€³ç¯/è…°å¸¦ç­‰\n- âŒ ä¸åŒ…æ‹¬æ‰‹æŒé“å…·æˆ–ç‰©å“\n- ç¤ºä¾‹ï¼š\"é¢ˆé—´ä½©æˆ´ç®€å•çš„é“¶è‰²é¡¹é“¾\"\"å³æ‰‹è…•ç¼ ç»•é»‘è‰²çš®è´¨æ‰‹ç¯\"\n\n---\n\n### **æ¨¡å—4ï¼šæ°”è´¨çŠ¶æ€**\n\n**æè¿°ç»´åº¦**ï¼š\n\n#### **æ•´ä½“æ°”è´¨æ°›å›´**\n- ä¼ è¾¾è§’è‰²çš„æ•´ä½“æ°”åœºå’Œç»™äººçš„å°è±¡\n- èšç„¦é•¿æœŸç¨³å®šçš„æ°”è´¨ç‰¹å¾ï¼Œè€Œéå…·ä½“è¡¨æƒ…\n- âœ… æ­£ç¡®ï¼š\"æ•£å‘å‡ºç¥ç§˜å†·æ¼ çš„æ°”è´¨\"\"å¸¦æœ‰ä¹¦å·æ°”æ¯\"\"å……æ»¡é‡æ€§æ°”æ¯\"\n- âŒ é”™è¯¯ï¼š\"è¡¨æƒ…æ‚²ä¼¤\"\"çœ¼ç¥æ¸©æŸ”\"\"é¢å¸¦å¾®ç¬‘\"ï¼ˆè¿™äº›æ˜¯è¡¨æƒ…ï¼‰\n- ç¤ºä¾‹ï¼š\"æ•£å‘å‡ºå¿§éƒå­¤ç‹¬çš„æ°”æ¯\"\"å……æ»¡é‡æ€§ä¸ç¾çš„æ°”è´¨\"\n\n**é‡è¦è¯´æ˜**ï¼š\n- æ°”è´¨æè¿°åº”èšç„¦**ç›¸å¯¹ç¨³å®šçš„ç‰¹è´¨**ï¼Œè€Œéç¬æ—¶è¡¨æƒ…\n- é¿å…æè¿°\"çœ¼ç¥\"\"è¡¨æƒ…\"\"è„¸è‰²\"ç­‰ä¼šéšåœºæ™¯å˜åŒ–çš„å…ƒç´ \n- è¿™äº›åŠ¨æ€å…ƒç´ å°†åœ¨åç»­çš„åˆ†é•œè„šæœ¬ä¸­ä½“ç°\n\n---\n\n## âœï¸ æè¿°æ„å»ºç¤ºä¾‹\n\n### **âŒ é”™è¯¯ç¤ºä¾‹1ï¼ˆåŒ…å«èƒŒæ™¯å…ƒç´ ï¼‰ï¼š**\n```\n\"èµ›åšæœ‹å…‹é£æ ¼ï¼Œå…¨èº«å½¢è±¡ã€‚ä¸€ä½å¹´è½»å¥³æ€§ç«™åœ¨éœ“è™¹ç¯é—ªçƒçš„è¡—é“ä¸Š...\"\n```\n**é”™è¯¯åŸå› **ï¼šåŒ…å«äº†\"è¡—é“\"\"éœ“è™¹ç¯\"ç­‰ç¯å¢ƒå…ƒç´ \n\n### **âŒ é”™è¯¯ç¤ºä¾‹2ï¼ˆæè¿°è¿‡äºç®€å•ï¼‰ï¼š**\n```\n\"ç§‘å¹»é£æ ¼ï¼Œå…¨èº«ã€‚ä¸€ä¸ªç©¿é»‘è¡£æœçš„ç”·äººã€‚\"\n```\n**é”™è¯¯åŸå› **ï¼šç¼ºå°‘å…·ä½“ç»†èŠ‚ï¼Œæ— æ³•å½¢æˆæ¸…æ™°çš„è§†è§‰å½¢è±¡\n\n### **âŒ é”™è¯¯ç¤ºä¾‹3ï¼ˆåŒ…å«è¡¨æƒ…ï¼‰ï¼š**\n```\n\"å¤è£…é£æ ¼ï¼Œå…¨èº«å½¢è±¡ã€‚ä¸€ä½ä¹¦ç”Ÿï¼Œçœ‰å¤´ç´§é”ï¼Œé¢å¸¦å¿§æ„...\"\n```\n**é”™è¯¯åŸå› **ï¼šåŒ…å«äº†\"çœ‰å¤´ç´§é”\"\"é¢å¸¦å¿§æ„\"ç­‰è¡¨æƒ…æè¿°\n\n### **âœ… æ­£ç¡®ç¤ºä¾‹1ï¼š**\n```\n\"èµ›åšæœ‹å…‹é£æ ¼ï¼Œå…¨èº«å½¢è±¡ã€‚ä¸€ä½22å²å·¦å³çš„äºšæ´²å¥³æ€§ï¼Œé“¶ç™½è‰²çŸ­å‘å¸¦æœ‰ç´«è‰²æ¸å˜ï¼Œå·¦ä¾§å‰ƒçŸ­éœ²å‡ºç”µå­çº¹èº«ã€‚æ·±é‚ƒçš„çœ¼çªï¼Œè–„å”‡ï¼Œé«˜é¢§éª¨ã€‚çº¤ç˜¦é«˜æŒ‘çš„èº«æï¼Œèº«ç©¿é»‘è‰²ç´§èº«ä½œæˆ˜æœï¼Œæè´¨ä¸ºåˆæˆçš®é©ï¼Œèƒ¸å£å’Œè¢–å£é•¶åµŒè§å…‰è“è‰²ç¯å¸¦ï¼Œå³è‡‚æŠ¤ç”²æœ‰æ˜æ˜¾åˆ’ç—•ã€‚æ•´ä½“æ•£å‘å‡ºå†·é…·ç–ç¦»çš„æ°”è´¨ï¼Œä¹ æƒ¯æ€§æŒºæ‹”ç«™ç«‹ï¼Œè‚©è†€ç•¥å¾®åæ”¶ã€‚\"\n```\n\n### **âœ… æ­£ç¡®ç¤ºä¾‹2ï¼š**\n```\n\"å“¥ç‰¹å¼æš—é»‘é£æ ¼ï¼Œå…¨èº«å½¢è±¡ã€‚ä¸€ä½17å²å·¦å³çš„å°‘å¥³ï¼Œä¹Œé»‘é•¿å‘åŠè…°ï¼Œå‘å°¾å¾®å·ï¼Œåˆ˜æµ·é®ä½å³çœ¼ã€‚è‹ç™½çš„è‚¤è‰²ï¼Œå°–ä¸‹å·´ï¼Œè–„å”‡ã€‚çº¤ç»†ç˜¦å¼±çš„èº«æï¼Œèº«ç©¿ç ´æ—§çš„ç™½è‰²è•¾ä¸é•¿è£™ï¼Œè£™æ‘†æœ‰å¤šå¤„æ’•è£‚å’Œæ±¡æ¸ï¼Œæè´¨ä¸ºæ£‰éº»æ··çººã€‚èµ¤è¶³ï¼Œå³è„šè¸æœ‰æš—çº¢è‰²èƒè®°ã€‚å·¦æ‰‹è…•ç¼ ç»•é»‘è‰²ä¸å¸¦ï¼Œè„–é¢ˆä½©æˆ´é“¶è‰²åå­—æ¶é¡¹é“¾ã€‚æ•´ä½“æ•£å‘å‡ºè„†å¼±é˜´éƒçš„æ°”æ¯ï¼Œä¹ æƒ¯æ€§è‚©è†€å¾®å¾®è€¸èµ·ï¼Œèº«ä½“ç•¥æ˜¾èœ·ç¼©ã€‚\"\n```\n\n---\n\n## ğŸ“ è¾“å‡ºè¦æ±‚\n\n### **1. å­—æ•°æ§åˆ¶**\n- æ€»å­—æ•°ï¼š**80-150å­—**\n- è¿‡çŸ­ï¼šç¼ºå°‘å¿…è¦ç»†èŠ‚\n- è¿‡é•¿ï¼šä¿¡æ¯å†—ä½™ï¼Œéš¾ä»¥èšç„¦\n\n### **2. æè¿°é£æ ¼**\n- âœ… ä½¿ç”¨**å…·ä½“ã€å¯è§†åŒ–**çš„æè¿°\n- âœ… é¿å…æŠ½è±¡å½¢å®¹è¯ï¼ˆå¦‚\"ç¾ä¸½\"\"è‹±ä¿Š\"ï¼‰\n- âœ… èšç„¦**å¤–åœ¨å¯è§ã€ç›¸å¯¹å›ºå®š**çš„ç‰¹å¾\n- âŒ ä¸æè¿°æ€§æ ¼ã€èƒŒæ™¯æ•…äº‹ã€å†…å¿ƒæ´»åŠ¨\n- âŒ **ä¸æè¿°è¡¨æƒ…ã€çœ¼ç¥ã€é¢éƒ¨æƒ…ç»ª**\n\n### **3. è§†è§‰ä¸€è‡´æ€§**\n- ç¡®ä¿æè¿°è¶³å¤Ÿå…·ä½“ï¼Œèƒ½åœ¨ä¸åŒåœºæ™¯ä¸­è¯†åˆ«å‡ºåŒä¸€è§’è‰²\n- è‡³å°‘åŒ…å«**2-3ä¸ª**å¼ºçƒˆçš„è§†è§‰è¯†åˆ«ç‚¹\n- æè¿°çš„ç‰¹å¾åº”è¯¥æ˜¯**ç¨³å®šä¸å˜**çš„\n\n### **4. ä¸æ•…äº‹çš„å¥‘åˆåº¦**\n- è§’è‰²å½¢è±¡å¿…é¡»**è§†è§‰åŒ–åœ°ä½“ç°**æ•…äº‹æ ¸å¿ƒè¦ç´ \n- é€šè¿‡æœé¥°ã€æ°”è´¨ã€å¤–è²Œç‰¹å¾æš—ç¤ºæ•…äº‹ä¸»é¢˜\n  - ä¾‹ï¼šæ‚¬ç–‘æ•…äº‹â†’ç¥ç§˜å‹æŠ‘çš„æœé¥°æ°”è´¨\n  - ä¾‹ï¼šåŠ±å¿—æ•…äº‹â†’è™½ç ´æ—§ä½†æœ‰åŠ›é‡æ„Ÿçš„å½¢è±¡\n\n---\n\n## âš ï¸ ä¸¥æ ¼ç¦æ­¢çš„å…ƒç´ \n\n**ç»å¯¹ä¸èƒ½å‡ºç°åœ¨æè¿°ä¸­**ï¼š\n\nâŒ **ç¯å¢ƒ/èƒŒæ™¯å…ƒç´ **\n- è¡—é“ã€æˆ¿é—´ã€å¤©ç©ºã€å»ºç­‘ã€è‡ªç„¶æ™¯è§‚ç­‰\n- é”™è¯¯ç¤ºä¾‹ï¼š\"ç«™åœ¨åºŸå¢Ÿä¸­çš„å°‘å¹´\"\n\nâŒ **å…‰çº¿/å¤©æ°”**\n- é˜³å…‰ã€é˜´å½±ã€æœˆå…‰ã€é›¨é›ªã€é›¾æ°”ç­‰\n- é”™è¯¯ç¤ºä¾‹ï¼š\"åœ¨æœˆå…‰ä¸‹çš„å¥³å­©\"\n\nâŒ **æ‰‹æŒé“å…·/ç‰©å“**\n- æ­¦å™¨ã€å·¥å…·ã€ä¹¦ç±ã€ä»»ä½•æ‰‹æŒç‰©ç­‰\n- é”™è¯¯ç¤ºä¾‹ï¼š\"æ‰‹æ¡é•¿å‰‘çš„æˆ˜å£«\"\n\nâŒ **å…¶ä»–è§’è‰²**\n- ä»»ä½•ç¬¬äºŒä¸ªäººæˆ–ç”Ÿç‰©\n- é”™è¯¯ç¤ºä¾‹ï¼š\"å’Œæœ‹å‹åœ¨ä¸€èµ·çš„ç”·å­©\"\n\nâŒ **åŠ¨ä½œ/è¡Œä¸º**\n- èµ°è·¯ã€å¥”è·‘ã€æˆ˜æ–—ç­‰åŠ¨æ€è¡Œä¸º\n- é”™è¯¯ç¤ºä¾‹ï¼š\"æ­£åœ¨å¥”è·‘çš„å°‘å¥³\"\n\nâŒ **è¡¨æƒ…/æƒ…ç»ª/çœ¼ç¥**ï¼ˆé‡è¦ï¼ï¼‰\n- å¾®ç¬‘ã€çš±çœ‰ã€çœ¼ç¥æ¸©æŸ”ã€é¢éœ²æ‚²ä¼¤ç­‰\n- é”™è¯¯ç¤ºä¾‹ï¼š\"çœ¼ç¥ç©ºæ´çš„å¥³å­©\"\"é¢å¸¦å¾®ç¬‘çš„å°‘å¹´\"\"çœ‰å¤´ç´§é”\"\n- **åŸå› **ï¼šè¡¨æƒ…ä¼šåœ¨åç»­åˆ†é•œè„šæœ¬ä¸­æ ¹æ®æƒ…èŠ‚å˜åŒ–\n\n**âœ… å…è®¸çš„å…ƒç´ **ï¼š\n- ç©¿æˆ´åœ¨èº«ä¸Šçš„é…é¥°ï¼ˆé¡¹é“¾ã€è€³ç¯ã€æ‰‹ç¯ã€å¸½å­ç­‰ï¼‰\n- æœè£…æœ¬èº«çš„è£…é¥°ï¼ˆè…°å¸¦ã€çº½æ‰£ã€å›¾æ¡ˆç­‰ï¼‰\n- äº”å®˜çš„ç»“æ„ç‰¹å¾ï¼ˆéè¡¨æƒ…ï¼‰\n- æ•´ä½“ç¨³å®šçš„æ°”è´¨æ°›å›´ï¼ˆéç¬æ—¶æƒ…ç»ªï¼‰\n\n---\n\n## ğŸ“¤ è¾“å‡ºæ ¼å¼ï¼ˆJSONï¼‰\n\n```json\n{\n  \"character_prompt\": \"{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}é£æ ¼ï¼Œå…¨èº«å½¢è±¡ã€‚[åŸºç¡€å¤–è§‚]ã€‚[æœé¥°ç»†èŠ‚]ã€‚[æ°”è´¨çŠ¶æ€]ã€‚\"\n}\n```\n\n---\n\n## âœ… è´¨é‡æ£€æŸ¥æ¸…å•\n\nè¾“å‡ºå‰è¯·ç¡®è®¤ï¼š\n\n- [ ] ä»¥\"{{ $('è§†é¢‘å­—æ®µé…ç½®').item.json.artistic_style }}é£æ ¼ï¼Œå…¨èº«å½¢è±¡\"å¼€å¤´\n- [ ] åŒ…å«å®Œæ•´çš„äº”å¤§æ¨¡å—\n- [ ] å­—æ•°åœ¨80-150å­—ä¹‹é—´\n- [ ] è‡³å°‘2-3ä¸ªæ¸…æ™°çš„è§†è§‰è¯†åˆ«ç‚¹\n- [ ] æ— ä»»ä½•èƒŒæ™¯/ç¯å¢ƒ/é“å…·/å…‰çº¿æè¿°\n- [ ] **æ— ä»»ä½•è¡¨æƒ…/çœ¼ç¥/æƒ…ç»ªæè¿°**\n- [ ] æè¿°å…·ä½“å¯è§†åŒ–ï¼Œé¿å…æŠ½è±¡å½¢å®¹\n- [ ] æ‰€æœ‰ç‰¹å¾éƒ½æ˜¯ç›¸å¯¹ç¨³å®šã€ä¸æ˜“å˜åŒ–çš„\n- [ ] è§’è‰²å½¢è±¡ä¸æ•…äº‹æ ¸å¿ƒç›¸å¥‘åˆ\n- [ ] è¾“å‡ºä¸ºæ ‡å‡†JSONæ ¼å¼\n\n---\n\n## ğŸ¬ å¼€å§‹åˆ›ä½œ\n\nç°åœ¨è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸Šè¦æ±‚ï¼Œä¸ºæˆ‘ç”Ÿæˆè§’è‰²å½¢è±¡æè¿°ã€‚\n\n**ç›´æ¥è¾“å‡ºJSONï¼Œä¸è¦ä»»ä½•å…¶ä»–å†…å®¹ã€‚**\n",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        688,
        320
      ],
      "id": "653a8b53-5b23-49a9-8026-bdedd51be85d",
      "name": "ç”Ÿæˆè§’è‰²å½¢è±¡æè¿°",
      "retryOnFail": true,
      "waitBetweenTries": 1000,
      "maxTries": 5
    },
    {
      "parameters": {
        "jsCode": "const video_ratio = $('è§†é¢‘å­—æ®µé…ç½®').first().json.video_ratio\nlet width = 0;\nlet height = 0;\nif (video_ratio === '1:1') {\n  width = 1024;\n  height = 1024;\n} else if (video_ratio === '4:3') {\n  width = 1472;\n  height = 1136;\n} else if (video_ratio === '3:4') {\n  width = 1136;\n  height = 1472;\n} else if (video_ratio === '3:2') {\n  width = 1584;\n  height = 1056;\n} else if (video_ratio === '2:3') {\n  width = 1056;\n  height = 1584;\n} else if (video_ratio === '16:9') {\n  width = 1656;\n  height = 928;\n} else if (video_ratio === '9:16') {\n  width = 928;\n  height = 1656;\n}\n\nreturn {\n  \"image_width\": width,\n  \"image_height\": height,\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        160,
        320
      ],
      "id": "2ca20c46-3115-4042-9172-5c6275373a82",
      "name": "å›¾ç‰‡æ¯”ä¾‹è®¡ç®—"
    },
    {
      "parameters": {
        "jsCode": "const video_ratio = $('è§†é¢‘å­—æ®µé…ç½®').first().json.video_ratio\nlet width = 0;\nlet height = 0;\nif (video_ratio === '1:1') {\n  width = 480;\n  height = 480;\n} else if (video_ratio === '4:3') {\n  width = 640;\n  height = 480;\n} else if (video_ratio === '3:4') {\n  width = 480;\n  height = 640;\n} else if (video_ratio === '3:2') {\n  width = 720;\n  height = 480;\n} else if (video_ratio === '2:3') {\n  width = 480;\n  height = 720;\n} else if (video_ratio === '16:9') {\n  width = 856;   \n  height = 480;\n} else if (video_ratio === '9:16') {\n  width = 480;   \n  height = 856;\n}\n\nreturn {\n  \"video_width\": width,\n  \"video_height\": height,\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        368,
        320
      ],
      "id": "dada7443-66b3-4d34-9d55-5ac5005dbd76",
      "name": "è§†é¢‘æ¯”ä¾‹è®¡ç®—"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json['å·¥ä½œæµid-ç”ŸæˆéŸ³é¢‘'] }}",
          "mode": "id",
          "cachedResultUrl": "/workflow/=%7B%7B%20$('%E5%9F%BA%E7%A1%80%E5%AD%97%E6%AE%B5%E9%85%8D%E7%BD%AE').first().json['%E5%B7%A5%E4%BD%9C%E6%B5%81id-%E7%94%9F%E6%88%90%E9%9F%B3%E9%A2%91']%20%7D%7D"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "voice_script": "={{ $('ç”Ÿæˆè¯­éŸ³è„šæœ¬').first().json.output }}",
            "runninghub_apikey": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.runninghub_apikey }}",
            "output_folder_path": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path }}",
            "voice_example_folder_path": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path .split('/').slice(0, -2).join('/') + '/' + 'voice/' }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "voice_script",
              "displayName": "voice_script",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object"
            },
            {
              "id": "runninghub_apikey",
              "displayName": "runninghub_apikey",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "output_folder_path",
              "displayName": "output_folder_path",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "voice_example_folder_path",
              "displayName": "voice_example_folder_path",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1168,
        1360
      ],
      "id": "f93eeeed-ec0c-4f50-91a7-50c6496dc991",
      "name": "Call 'è§†é¢‘å·¥ä½œæµ-ç”ŸæˆéŸ³é¢‘'"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "65bc3b5d-145c-46d8-b35f-d3c06958d605",
              "name": "data",
              "value": "={{ $json.data.map(item => {\n  return {\n    ...item,\n    filePath: item.voice_filepath\n  }\n}) }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1424,
        1360
      ],
      "id": "c9820afc-046c-460b-94e4-7eca0d4b3ea5",
      "name": "ç”ŸæˆéŸ³é¢‘åå­—æ®µæ•´ç†"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json['å·¥ä½œæµid-ç”Ÿæˆè§†é¢‘'] }}",
          "cachedResultName": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json['å·¥ä½œæµid-ç”Ÿæˆè§†é¢‘'] }}"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "image_filepath": "={{ $('Loop Over Items').item.json.storyboard_images_filepath }}",
            "prompt": "={{ $json.data.prompt }}",
            "duration": "={{ $json.data.duration }}",
            "width": "={{ $('è§†é¢‘æ¯”ä¾‹è®¡ç®—').first().json.video_width }}",
            "height": "={{ $('è§†é¢‘æ¯”ä¾‹è®¡ç®—').first().json.video_height }}",
            "runninghub_apikey": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.runninghub_apikey }}",
            "output_folder_path": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "image_filepath",
              "displayName": "image_filepath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "prompt",
              "displayName": "prompt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "duration",
              "displayName": "duration",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number"
            },
            {
              "id": "width",
              "displayName": "width",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number"
            },
            {
              "id": "height",
              "displayName": "height",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number"
            },
            {
              "id": "runninghub_apikey",
              "displayName": "runninghub_apikey",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "output_folder_path",
              "displayName": "output_folder_path",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        528,
        1408
      ],
      "id": "7b94b22b-00a1-4eb5-8531-2604de3eb763",
      "name": "Call 'è§†é¢‘å·¥ä½œæµ-ç”Ÿæˆè§†é¢‘'"
    },
    {
      "parameters": {
        "command": "=mkdir -p  {{ $('åŸºç¡€å­—æ®µé…ç½®').item.json.output_folder_path }}"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -128,
        320
      ],
      "id": "4e9aa7d7-291c-499e-a04b-9947824c4e64",
      "name": "åˆ›å»ºå­æ–‡ä»¶å¤¹"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json['å·¥ä½œæµid-ç”ŸæˆèƒŒæ™¯éŸ³ä¹'] }}",
          "mode": "id",
          "cachedResultUrl": "/workflow/=%7B%7B%20$('%E5%9F%BA%E7%A1%80%E5%AD%97%E6%AE%B5%E9%85%8D%E7%BD%AE').first().json['%E5%B7%A5%E4%BD%9C%E6%B5%81id-%E7%94%9F%E6%88%90%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90']%20%7D%7D"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "storyboard_prompts": "={{ $('ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬').first().json.output.storyboard_prompts }}",
            "character": "={{ $('è§’è‰²å’Œåˆ†é•œè„šæœ¬å­—æ®µæ•´ç†').first().json.character_prompt }}",
            "runninghub_apikey": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.runninghub_apikey }}",
            "output_folder_path": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "storyboard_prompts",
              "displayName": "storyboard_prompts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array"
            },
            {
              "id": "character",
              "displayName": "character",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "runninghub_apikey",
              "displayName": "runninghub_apikey",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "output_folder_path",
              "displayName": "output_folder_path",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        -160,
        2096
      ],
      "id": "5e6eda60-f377-4ab5-94eb-35da28bd2c7f",
      "name": "Call 'è§†é¢‘ç”Ÿæˆ-ç”ŸæˆèƒŒæ™¯éŸ³ä¹'"
    },
    {
      "parameters": {
        "jsCode": "const music_filepath = $('ç”ŸæˆèƒŒæ™¯éŸ³ä¹åå­—æ®µæ•´ç†').first().json.music_filepath\nconst video_sound_dub = $('Video Composer').first().json.outputPath\n\nreturn {\n  \"data\": {\n    \"video_path_list\": [video_sound_dub],\n    \"audio_path_list\": [{\n      \"filePath\": music_filepath,\n      \"start_time\": 0,\n      \"audio_length\": $input.first().json.duration_ms\n    }]\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        880,
        2096
      ],
      "id": "6884fb8f-86e1-4634-81a0-f101f735aaef",
      "name": "éŸ³è§†é¢‘åˆå¹¶å‰æ•°æ®æ•´ç†2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f76c827d-dabe-4b76-8d2c-2739134019a8",
              "name": "music_filepath",
              "value": "={{ $json.music_filepath }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        48,
        2096
      ],
      "id": "52c84802-9ee2-4db9-ad87-7a965bf0d52a",
      "name": "ç”ŸæˆèƒŒæ™¯éŸ³ä¹åå­—æ®µæ•´ç†"
    },
    {
      "parameters": {
        "jsCode": "function getFlacDurationFromBinary(binaryData) {\n    try {\n        // ä» n8n çš„ binary æ•°æ®è·å– Buffer\n        const buffer = Buffer.from(binaryData.data, 'base64');\n        \n        // éªŒè¯ FLAC æ–‡ä»¶å¤´\n        if (buffer.toString('utf8', 0, 4) !== 'fLaC') {\n            return { error: 'ä¸æ˜¯æœ‰æ•ˆçš„ FLAC æ–‡ä»¶' };\n        }\n        \n        let offset = 4;\n        \n        // è¯»å–å…ƒæ•°æ®å—\n        while (offset < buffer.length) {\n            const blockHeader = buffer.readUInt32BE(offset);\n            offset += 4;\n            \n            const isLast = (blockHeader & 0x80000000) !== 0;\n            const blockType = (blockHeader & 0x7F000000) >>> 24;\n            const blockSize = blockHeader & 0x00FFFFFF;\n            \n            // STREAMINFO å—ç±»å‹æ˜¯ 0\n            if (blockType === 0) {\n                // é‡‡æ ·ç‡åœ¨åç§» 10-12 (20ä½)\n                const sampleRateHigh = buffer.readUInt16BE(offset + 10);\n                const sampleRateLow = buffer.readUInt8(offset + 12);\n                const sampleRate = ((sampleRateHigh << 4) | (sampleRateLow >> 4)) & 0xFFFFF;\n                \n                // æ€»æ ·æœ¬æ•°åœ¨åç§» 13-17 (36ä½)\n                const totalSamplesBytes = buffer.slice(offset + 13, offset + 18);\n                const totalSamples =\n                    ((totalSamplesBytes[0] & 0x0F) * 0x100000000) +\n                    (totalSamplesBytes[1] * 0x1000000) +\n                    (totalSamplesBytes[2] * 0x10000) +\n                    (totalSamplesBytes[3] * 0x100) +\n                    totalSamplesBytes[4];\n                \n                if (sampleRate > 0) {\n                    const duration = totalSamples / sampleRate;\n                    const minutes = Math.floor(duration / 60);\n                    const seconds = Math.floor(duration % 60);\n                    \n                    return {\n                        duration_seconds: duration,\n                        duration_formatted: `${minutes}:${seconds.toString().padStart(2, '0')}`,\n                        sample_rate: sampleRate,\n                        total_samples: totalSamples\n                    };\n                }\n                break;\n            }\n            \n            offset += blockSize;\n            if (isLast) break;\n        }\n        \n        return { error: 'æœªæ‰¾åˆ° STREAMINFO å—' };\n        \n    } catch (error) {\n        return { error: error.message };\n    }\n}\n\n// ä»ä¸Šä¸€ä¸ªèŠ‚ç‚¹è·å– binary æ•°æ®\nconst binaryData = $input.first().binary.data;\n\nconst result = getFlacDurationFromBinary(binaryData);\n\n// è¿”å›ç»“æœ\nreturn {\n  duration_ms: Math.floor(result.duration_seconds * 1000)\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        592,
        2096
      ],
      "id": "e8d1d1c5-3483-477e-a233-e1e558136b9f",
      "name": "è·å–éŸ³é¢‘æ—¶é•¿"
    },
    {
      "parameters": {
        "fileSelector": "={{ $json.music_filepath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        336,
        2096
      ],
      "id": "d3f70c37-c804-4ef4-8457-dc32e1f7ad2c",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "videoPath": "={{ $json.data.video_path_list[0] }}",
        "audioFilesArray": "={{ $json.data.audio_path_list }}",
        "pathFieldName": "filePath",
        "timeFieldName": "start_time",
        "audioVolume": -15,
        "subtitlePath": "=",
        "outputPath": "={{ $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path }}è§†é¢‘ç”Ÿæˆç»“æœ_{{ $now.format('yyyy-MM-dd_hh-mm-ss') }}.mp4"
      },
      "type": "n8n-nodes-media-composition.videoComposer",
      "typeVersion": 1,
      "position": [
        1120,
        2096
      ],
      "id": "ae3ee5af-d2c5-401f-b107-37fab7014927",
      "name": "Video Composer3"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -768,
        320
      ],
      "id": "735d691e-0e22-4c4e-b746-5380c54087d1",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "resume": "form",
        "formTitle": "è¯·ç¡®è®¤è§’è‰²å½¢è±¡å’Œåˆ†é•œå›¾ç‰‡",
        "formDescription": "=",
        "formFields": {
          "values": [
            {
              "fieldType": "html"
            },
            {
              "fieldLabel": "æ˜¯å¦ç»§ç»­ç”Ÿæˆè§†é¢‘",
              "fieldType": "radio",
              "fieldOptions": {
                "values": [
                  {
                    "option": "ç»§ç»­ç”Ÿæˆ"
                  },
                  {
                    "option": "é‡æ–°ç”Ÿæˆè§’è‰²å’Œåˆ†é•œå›¾ç‰‡"
                  }
                ]
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        976,
        1136
      ],
      "id": "921ee329-3a20-40b3-81cd-f759319bb81e",
      "name": "Wait2",
      "webhookId": "f12673c4-93ee-4f56-b83c-ea3a6afd1fc9",
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "1fc93497-9aa0-4381-b8ff-12e0ed8b01ad",
              "leftValue": "={{ $json['æ˜¯å¦ç»§ç»­ç”Ÿæˆè§†é¢‘'] }}",
              "rightValue": "ç»§ç»­ç”Ÿæˆ",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1152,
        1136
      ],
      "id": "f22630d2-ef97-4a97-b5ea-383e61ec3c5e",
      "name": "If2",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "const storyboardData = $('ç”Ÿæˆè§†é¢‘åˆ†é•œè„šæœ¬').first().json.output.storyboard_prompts.map(item => item.prompt)\nconst audioList = $('ç”Ÿæˆè¯­éŸ³è„šæœ¬').first().json.output.voice_scripts.map(item => {\n  const timbre_id = item.timbre_id;\n  const timbre = $('ç”Ÿæˆè¯­éŸ³è„šæœ¬').first().json.output.characters_timbre.find(i => i.timbre_id === timbre_id)\n  return {\n    \"text\": item.text,\n    \"timbre_name\": timbre.timbre_name\n  }\n})\n\n// è·å–æ–‡ä»¶å¤¹è·¯å¾„\nconst folderPath = $('åŸºç¡€å­—æ®µé…ç½®').first().json.output_folder_path;\n\nlet html = '';\n\n// 0. é¡¶éƒ¨è¯´æ˜\nhtml += '<h2>âœ… ç”Ÿæˆå®Œæˆ</h2>\\n';\nhtml += '<p><strong>è§’è‰²å½¢è±¡å’Œåˆ†é•œå›¾ç‰‡å·²ç”Ÿæˆå®Œæ¯•ã€‚</strong></p>\\n';\nhtml += `<p>æ‰“å¼€ <strong>${folderPath}</strong> æ–‡ä»¶å¤¹æŸ¥çœ‹å›¾ç‰‡ï¼Œç¡®è®¤æ˜¯å¦ç»§ç»­ç”Ÿæˆè§†é¢‘ã€‚</p>\\n`;\nhtml += '<hr>\\n<br>\\n';\n\n// 1. è§†é¢‘åˆ†é•œä¸é…éŸ³ï¼ˆç©¿æ’å±•ç¤ºï¼‰\nhtml += '<h2>ğŸ¬ è§†é¢‘åˆ†é•œä¸é…éŸ³è„šæœ¬</h2>\\n';\nhtml += `<p><strong>å…± ${storyboardData.length} ä¸ªåœºæ™¯</strong></p>\\n`;\nhtml += '<hr>\\n';\n\nstoryboardData.forEach((scene, index) => {\n  // è§†é¢‘åˆ†é•œ\n  html += `<h3>ğŸ¬ é•œå¤´ ${index + 1}</h3>\\n`;\n  html += `<p>${scene}</p>\\n`;\n  html += '<br>\\n';\n  \n  // å¯¹åº”çš„é…éŸ³\n  if (audioList[index]) {\n    html += `<h3>ğŸ¤ é…éŸ³ ${index + 1} - ${audioList[index].timbre_name}</h3>\\n`;\n    html += `<p>${audioList[index].text}</p>\\n`;\n  }\n  \n  html += '<hr>\\n';\n});\n\nreturn { html: html };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        784,
        1136
      ],
      "id": "9d2e4aad-afc3-4457-805f-c56951fbf45f",
      "name": "Code in JavaScript3",
      "disabled": true
    },
    {
      "parameters": {
        "model": "deepseek-reasoner",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        704,
        528
      ],
      "id": "a866221f-ffeb-491a-bf89-55b5dabdc47d",
      "name": "DeepSeek Chat Model",
      "credentials": {
        "deepSeekApi": {
          "id": "2SXDvVt9uFwfTnQm",
          "name": "DeepSeek n8n Account"
        }
      }
    },
    {
      "parameters": {
        "model": "deepseek-reasoner",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        1120,
        528
      ],
      "id": "77fd4fff-7325-4ab9-b458-a2cdd7ed1ddf",
      "name": "DeepSeek Chat Model1",
      "credentials": {
        "deepSeekApi": {
          "id": "2SXDvVt9uFwfTnQm",
          "name": "DeepSeek n8n Account"
        }
      }
    },
    {
      "parameters": {
        "model": "deepseek-reasoner",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        528,
        896
      ],
      "id": "9cd4e791-3bc2-4982-bf0d-3a760bd6b0a8",
      "name": "DeepSeek Chat Model2",
      "credentials": {
        "deepSeekApi": {
          "id": "2SXDvVt9uFwfTnQm",
          "name": "DeepSeek n8n Account"
        }
      }
    },
    {
      "parameters": {
        "model": "deepseek-reasoner",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        144,
        896
      ],
      "id": "d57b74ca-cb0b-4bec-b0db-2d3ee1db18f0",
      "name": "DeepSeek Chat Model3",
      "credentials": {
        "deepSeekApi": {
          "id": "2SXDvVt9uFwfTnQm",
          "name": "DeepSeek n8n Account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        16,
        1888
      ],
      "id": "b5004a04-f416-4d7a-9d4b-aba00ae2b7fb",
      "name": "DeepSeek Chat Model4",
      "credentials": {
        "deepSeekApi": {
          "id": "2SXDvVt9uFwfTnQm",
          "name": "DeepSeek n8n Account"
        }
      }
    },
    {
      "parameters": {
        "content": "é…ç½®åŒº",
        "height": 208,
        "width": 336,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -560,
        272
      ],
      "typeVersion": 1,
      "id": "b46d1270-3bc0-449f-8c1e-91fa8f6b5bcb",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5409ff58-dc50-44ef-b4b4-8fc8595fffd7",
              "name": "video_ratio",
              "value": "=3:4",
              "type": "string"
            },
            {
              "id": "72c660a6-4ac6-4eed-a43c-ea1b15358887",
              "name": "max_image_count",
              "value": "=2",
              "type": "string"
            },
            {
              "id": "7f6f08a0-d528-4d35-9113-12fec4b8e01f",
              "name": "story",
              "value": "=ä¸€ä¸ªå°å¥³è¿˜åœ¨èŠ±å›­ç©è€çš„æ•…äº‹",
              "type": "string"
            },
            {
              "id": "ca08f242-2a24-4dd5-bebf-2dfcb23b24c9",
              "name": "artistic_style",
              "value": "=3Dçš®å…‹æ–¯é£æ ¼",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -352,
        320
      ],
      "id": "50c5a5c6-96c4-4b9f-b877-7a5da2c8e4fe",
      "name": "è§†é¢‘å­—æ®µé…ç½®"
    },
    {
      "parameters": {
        "content": "é…ç½®åŒº",
        "height": 784,
        "width": 1760,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -176,
        272
      ],
      "typeVersion": 1,
      "id": "b3ff4c45-9559-4483-a79e-50b49b429433",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "ç”Ÿæˆè§’è‰²å›¾ç‰‡",
        "height": 240,
        "width": 480,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -176,
        1072
      ],
      "typeVersion": 1,
      "id": "685ab71b-182c-42a3-938d-1750ef55b7b4",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "ç”Ÿæˆåˆ†é•œå›¾ç‰‡",
        "height": 240,
        "width": 1264,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        320,
        1072
      ],
      "typeVersion": 1,
      "id": "bf19c2d3-d609-496b-a02a-9cfcd8900d87",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "ç”Ÿæˆè§†é¢‘ç‰‡æ®µ",
        "height": 288,
        "width": 1296
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -176,
        1328
      ],
      "typeVersion": 1,
      "id": "24c4d005-a7f0-460c-91c7-8efef2094390",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "ç”ŸæˆéŸ³é¢‘",
        "height": 288,
        "width": 448
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1136,
        1328
      ],
      "typeVersion": 1,
      "id": "324d45b0-17a1-40a9-aecf-68380972da50",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "ç”Ÿæˆå­—å¹•å¹¶åˆæˆè§†é¢‘",
        "height": 368,
        "width": 1776,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -176,
        1632
      ],
      "typeVersion": 1,
      "id": "7dd454dc-e14c-4759-a029-5b54f8f258d4",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "ç”ŸæˆèƒŒæ™¯éŸ³ä¹å¹¶å†æ¬¡åˆå¹¶è§†é¢‘",
        "height": 368,
        "width": 1776,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -176,
        2032
      ],
      "typeVersion": 1,
      "id": "e1701a57-15e4-43b8-b0ba-f6eb2de9a012",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "content": "\næ¬¢è¿åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œæˆ‘ä¼šæŒç»­åˆ†äº«AIç›¸å…³èµ„è®¯ã€ä½¿ç”¨æŠ€å·§ã€å·¥ä½œæµç­‰\n\nåŠ å…¥æ˜Ÿçƒåæƒç›Šï¼š\n1.å…è´¹å¸®åŠ©éƒ¨ç½²å·¥ä½œæµ\n2.å…è´¹å’¨è¯¢AIç›¸å…³é—®é¢˜\n3.å­¦ä¹ æ›´å¤šå®ç”¨AIä½¿ç”¨æŠ€å·§\n\nåŠ å…¥æ–¹å¼ï¼šæ‰“å¼€å›¾ç‰‡æ‰«ç é¢†å–é™é‡ä¼˜æƒ åˆ¸åŠ å…¥ â†“â†“â†“\nhttps://zsxq.tos-cn-beijing.volces.com/youhuiquan.png",
        "height": 224,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -928,
        16
      ],
      "typeVersion": 1,
      "id": "09e6117e-0879-4677-8380-b00bd54a63f3",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "content": "video_ratioï¼šè§†é¢‘æ¯”ä¾‹ï¼Œå¯é€‰å€¼ï¼š\n2:3\n3:2\n3:4\n4:3\n9:16\n16:9\n21:9\n9:21",
        "height": 256,
        "width": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -416,
        0
      ],
      "typeVersion": 1,
      "id": "ed6fa26a-e8ae-4efe-9a0c-8c58f4498784",
      "name": "Sticky Note9"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "updatedAt": "2025-11-18T02:41:55.604Z",
      "createdAt": "2025-11-18T02:41:55.604Z",
      "role": "workflow:owner",
      "workflowId": "yPBKYNvAmkIH3Cg1",
      "projectId": "AjKOXkiVfZaaIF4c"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-11-26T01:23:52.350Z",
  "versionId": "679805e3-096f-46f8-9a04-750ccac0dc83"
}